!function($){$.fn.foxyLink=function(options){var $wrapper=$(this),config={item:void 0,addClass:"hover"};if($.extend(config,options),!config.item)throw'foxyLink:: "item" property is required';$wrapper.each(function(){var $wrapItem=$(this);$wrapItem.on("touchstart.foxyLink",config.item,function(e){var $item=$(this);$(".menu__listItemLink").each(function(){$(this).removeClass("hover")}),$item.hasClass(config.addClass)||(e.preventDefault(),$item.addClass(config.addClass),$item.data("foxyLinkClass",config.addClass),setTimeout(function(){$(document).data("foxyLinkActive",$item)},0))})}),$(document).off("touchstart.foxyLink").on("touchstart.foxyLink",function(e){{var $target=$(e.target);$(document).data("foxyLinkActive")}$target.parents(".menu__listItem").find(".menu__listItemLink").length||$(".menu__listItemLink").removeClass("hover")})}}(jQuery),function($){"use strict";var jCarousel=$.jCarousel={};jCarousel.version="0.3.1";var rRelativeTarget=/^([+\-]=)?(.+)$/;jCarousel.parseTarget=function(target){var relative=!1,parts="object"!=typeof target?rRelativeTarget.exec(target):null;return parts?(target=parseInt(parts[2],10)||0,parts[1]&&(relative=!0,"-="===parts[1]&&(target*=-1))):"object"!=typeof target&&(target=parseInt(target,10)||0),{target:target,relative:relative}},jCarousel.detectCarousel=function(element){for(var carousel;element.length>0;){if(carousel=element.filter("[data-jcarousel]"),carousel.length>0)return carousel;if(carousel=element.find("[data-jcarousel]"),carousel.length>0)return carousel;element=element.parent()}return null},jCarousel.base=function(pluginName){return{version:jCarousel.version,_options:{},_element:null,_carousel:null,_init:$.noop,_create:$.noop,_destroy:$.noop,_reload:$.noop,create:function(){return this._element.attr("data-"+pluginName.toLowerCase(),!0).data(pluginName,this),!1===this._trigger("create")?this:(this._create(),this._trigger("createend"),this)},destroy:function(){return!1===this._trigger("destroy")?this:(this._destroy(),this._trigger("destroyend"),this._element.removeData(pluginName).removeAttr("data-"+pluginName.toLowerCase()),this)},reload:function(options){return!1===this._trigger("reload")?this:(options&&this.options(options),this._reload(),this._trigger("reloadend"),this)},element:function(){return this._element},options:function(key,value){if(0===arguments.length)return $.extend({},this._options);if("string"==typeof key){if("undefined"==typeof value)return"undefined"==typeof this._options[key]?null:this._options[key];this._options[key]=value}else this._options=$.extend({},this._options,key);return this},carousel:function(){return this._carousel||(this._carousel=jCarousel.detectCarousel(this.options("carousel")||this._element),this._carousel||$.error('Could not detect carousel for plugin "'+pluginName+'"')),this._carousel},_trigger:function(type,element,data){var event,defaultPrevented=!1;return data=[this].concat(data||[]),(element||this._element).each(function(){event=$.Event((pluginName+":"+type).toLowerCase()),$(this).trigger(event,data),event.isDefaultPrevented()&&(defaultPrevented=!0)}),!defaultPrevented}}},jCarousel.plugin=function(pluginName,pluginPrototype){var Plugin=$[pluginName]=function(element,options){this._element=$(element),this.options(options),this._init(),this.create()};return Plugin.fn=Plugin.prototype=$.extend({},jCarousel.base(pluginName),pluginPrototype),$.fn[pluginName]=function(options){var args=Array.prototype.slice.call(arguments,1),returnValue=this;return this.each("string"==typeof options?function(){var instance=$(this).data(pluginName);if(!instance)return $.error("Cannot call methods on "+pluginName+' prior to initialization; attempted to call method "'+options+'"');if(!$.isFunction(instance[options])||"_"===options.charAt(0))return $.error('No such method "'+options+'" for '+pluginName+" instance");var methodValue=instance[options].apply(instance,args);return methodValue!==instance&&"undefined"!=typeof methodValue?(returnValue=methodValue,!1):void 0}:function(){var instance=$(this).data(pluginName);instance instanceof Plugin?instance.reload(options):new Plugin(this,options)}),returnValue},Plugin}}(jQuery),function($,window){"use strict";var toFloat=function(val){return parseFloat(val)||0};$.jCarousel.plugin("jcarousel",{animating:!1,tail:0,inTail:!1,resizeTimer:null,lt:null,vertical:!1,rtl:!1,circular:!1,underflow:!1,relative:!1,_options:{list:function(){return this.element().children().eq(0)},items:function(){return this.list().children()},animation:400,transitions:!1,wrap:null,vertical:null,rtl:null,center:!1},_list:null,_items:null,_target:null,_first:null,_last:null,_visible:null,_fullyvisible:null,_init:function(){var self=this;return this.onWindowResize=function(){self.resizeTimer&&clearTimeout(self.resizeTimer),self.resizeTimer=setTimeout(function(){self.reload()},100)},this},_create:function(){this._reload(),$(window).on("resize.jcarousel",this.onWindowResize)},_destroy:function(){$(window).off("resize.jcarousel",this.onWindowResize)},_reload:function(){this.vertical=this.options("vertical"),null==this.vertical&&(this.vertical=this.list().height()>this.list().width()),this.rtl=this.options("rtl"),null==this.rtl&&(this.rtl=function(element){if("rtl"===(""+element.attr("dir")).toLowerCase())return!0;var found=!1;return element.parents("[dir]").each(function(){return/rtl/i.test($(this).attr("dir"))?(found=!0,!1):void 0}),found}(this._element)),this.lt=this.vertical?"top":"left",this.relative="relative"===this.list().css("position"),this._list=null,this._items=null;var item=this._target&&this.index(this._target)>=0?this._target:this.closest();this.circular="circular"===this.options("wrap"),this.underflow=!1;var props={left:0,top:0};return item.length>0&&(this._prepare(item),this.list().find("[data-jcarousel-clone]").remove(),this._items=null,this.underflow=this._fullyvisible.length>=this.items().length,this.circular=this.circular&&!this.underflow,props[this.lt]=this._position(item)+"px"),this.move(props),this},list:function(){if(null===this._list){var option=this.options("list");this._list=$.isFunction(option)?option.call(this):this._element.find(option)}return this._list},items:function(){if(null===this._items){var option=this.options("items");this._items=($.isFunction(option)?option.call(this):this.list().find(option)).not("[data-jcarousel-clone]")}return this._items},index:function(item){return this.items().index(item)},closest:function(){var width,self=this,pos=this.list().position()[this.lt],closest=$(),stop=!1,lrb=this.vertical?"bottom":this.rtl&&!this.relative?"left":"right";return this.rtl&&this.relative&&!this.vertical&&(pos+=this.list().width()-this.clipping()),this.items().each(function(){if(closest=$(this),stop)return!1;var dim=self.dimension(closest);if(pos+=dim,pos>=0){if(width=dim-toFloat(closest.css("margin-"+lrb)),!(Math.abs(pos)-dim+width/2<=0))return!1;stop=!0}}),closest},target:function(){return this._target},first:function(){return this._first},last:function(){return this._last},visible:function(){return this._visible},fullyvisible:function(){return this._fullyvisible},hasNext:function(){if(!1===this._trigger("hasnext"))return!0;var wrap=this.options("wrap"),end=this.items().length-1;return end>=0&&!this.underflow&&(wrap&&"first"!==wrap||this.index(this._last)<end||this.tail&&!this.inTail)?!0:!1},hasPrev:function(){if(!1===this._trigger("hasprev"))return!0;var wrap=this.options("wrap");return this.items().length>0&&!this.underflow&&(wrap&&"last"!==wrap||this.index(this._first)>0||this.tail&&this.inTail)?!0:!1},clipping:function(){return this._element["inner"+(this.vertical?"Height":"Width")]()},dimension:function(element){return element["outer"+(this.vertical?"Height":"Width")](!0)},scroll:function(target,animate,callback){if(this.animating)return this;if(!1===this._trigger("scroll",null,[target,animate]))return this;$.isFunction(animate)&&(callback=animate,animate=!0);var parsed=$.jCarousel.parseTarget(target);if(parsed.relative){var current,first,index,start,curr,isVisible,props,i,end=this.items().length-1,scroll=Math.abs(parsed.target),wrap=this.options("wrap");if(parsed.target>0){var last=this.index(this._last);if(last>=end&&this.tail)this.inTail?"both"===wrap||"last"===wrap?this._scroll(0,animate,callback):$.isFunction(callback)&&callback.call(this,!1):this._scrollTail(animate,callback);else if(current=this.index(this._target),this.underflow&&current===end&&("circular"===wrap||"both"===wrap||"last"===wrap)||!this.underflow&&last===end&&("both"===wrap||"last"===wrap))this._scroll(0,animate,callback);else if(index=current+scroll,this.circular&&index>end){for(i=end,curr=this.items().get(-1);i++<index;)curr=this.items().eq(0),isVisible=this._visible.index(curr)>=0,isVisible&&curr.after(curr.clone(!0).attr("data-jcarousel-clone",!0)),this.list().append(curr),isVisible||(props={},props[this.lt]=this.dimension(curr),this.moveBy(props)),this._items=null;this._scroll(curr,animate,callback)}else this._scroll(Math.min(index,end),animate,callback)}else if(this.inTail)this._scroll(Math.max(this.index(this._first)-scroll+1,0),animate,callback);else if(first=this.index(this._first),current=this.index(this._target),start=this.underflow?current:first,index=start-scroll,0>=start&&(this.underflow&&"circular"===wrap||"both"===wrap||"first"===wrap))this._scroll(end,animate,callback);else if(this.circular&&0>index){for(i=index,curr=this.items().get(0);i++<0;){curr=this.items().eq(-1),isVisible=this._visible.index(curr)>=0,isVisible&&curr.after(curr.clone(!0).attr("data-jcarousel-clone",!0)),this.list().prepend(curr),this._items=null;var dim=this.dimension(curr);props={},props[this.lt]=-dim,this.moveBy(props)}this._scroll(curr,animate,callback)}else this._scroll(Math.max(index,0),animate,callback)}else this._scroll(parsed.target,animate,callback);return this._trigger("scrollend"),this},moveBy:function(properties,opts){var position=this.list().position(),multiplier=1,correction=0;return this.rtl&&!this.vertical&&(multiplier=-1,this.relative&&(correction=this.list().width()-this.clipping())),properties.left&&(properties.left=position.left+correction+toFloat(properties.left)*multiplier+"px"),properties.top&&(properties.top=position.top+correction+toFloat(properties.top)*multiplier+"px"),this.move(properties,opts)},move:function(properties,opts){opts=opts||{};var option=this.options("transitions"),transitions=!!option,transforms=!!option.transforms,transforms3d=!!option.transforms3d,duration=opts.duration||0,list=this.list();if(!transitions&&duration>0)return void list.animate(properties,opts);var complete=opts.complete||$.noop,css={};if(transitions){var backup=list.css(["transitionDuration","transitionTimingFunction","transitionProperty"]),oldComplete=complete;complete=function(){$(this).css(backup),oldComplete.call(this)},css={transitionDuration:(duration>0?duration/1e3:0)+"s",transitionTimingFunction:option.easing||opts.easing,transitionProperty:duration>0?function(){return transforms||transforms3d?"all":properties.left?"left":"top"}():"none",transform:"none"}}transforms3d?css.transform="translate3d("+(properties.left||0)+","+(properties.top||0)+",0)":transforms?css.transform="translate("+(properties.left||0)+","+(properties.top||0)+")":$.extend(css,properties),transitions&&duration>0&&list.one("transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd",complete),list.css(css),0>=duration&&list.each(function(){complete.call(this)})},_scroll:function(item,animate,callback){if(this.animating)return $.isFunction(callback)&&callback.call(this,!1),this;if("object"!=typeof item?item=this.items().eq(item):"undefined"==typeof item.jquery&&(item=$(item)),0===item.length)return $.isFunction(callback)&&callback.call(this,!1),this;this.inTail=!1,this._prepare(item);var pos=this._position(item),currPos=this.list().position()[this.lt];if(pos===currPos)return $.isFunction(callback)&&callback.call(this,!1),this;var properties={};return properties[this.lt]=pos+"px",this._animate(properties,animate,callback),this},_scrollTail:function(animate,callback){if(this.animating||!this.tail)return $.isFunction(callback)&&callback.call(this,!1),this;var pos=this.list().position()[this.lt];this.rtl&&this.relative&&!this.vertical&&(pos+=this.list().width()-this.clipping()),this.rtl&&!this.vertical?pos+=this.tail:pos-=this.tail,this.inTail=!0;var properties={};return properties[this.lt]=pos+"px",this._update({target:this._target.next(),fullyvisible:this._fullyvisible.slice(1).add(this._visible.last())}),this._animate(properties,animate,callback),this},_animate:function(properties,animate,callback){if(callback=callback||$.noop,!1===this._trigger("animate"))return callback.call(this,!1),this;this.animating=!0;var animation=this.options("animation"),complete=$.proxy(function(){this.animating=!1;var c=this.list().find("[data-jcarousel-clone]");c.length>0&&(c.remove(),this._reload()),this._trigger("animateend"),callback.call(this,!0)},this),opts="object"==typeof animation?$.extend({},animation):{duration:animation},oldComplete=opts.complete||$.noop;return animate===!1?opts.duration=0:"undefined"!=typeof $.fx.speeds[opts.duration]&&(opts.duration=$.fx.speeds[opts.duration]),opts.complete=function(){complete(),oldComplete.call(this)},this.move(properties,opts),this},_prepare:function(item){var curr,isVisible,margin,dim,index=this.index(item),idx=index,wh=this.dimension(item),clip=this.clipping(),lrb=this.vertical?"bottom":this.rtl?"left":"right",center=this.options("center"),update={target:item,first:item,last:item,visible:item,fullyvisible:clip>=wh?item:$()};if(center&&(wh/=2,clip/=2),clip>wh)for(;;){if(curr=this.items().eq(++idx),0===curr.length){if(!this.circular)break;if(curr=this.items().eq(0),item.get(0)===curr.get(0))break;if(isVisible=this._visible.index(curr)>=0,isVisible&&curr.after(curr.clone(!0).attr("data-jcarousel-clone",!0)),this.list().append(curr),!isVisible){var props={};props[this.lt]=this.dimension(curr),this.moveBy(props)}this._items=null}if(dim=this.dimension(curr),0===dim)break;if(wh+=dim,update.last=curr,update.visible=update.visible.add(curr),margin=toFloat(curr.css("margin-"+lrb)),clip>=wh-margin&&(update.fullyvisible=update.fullyvisible.add(curr)),wh>=clip)break}if(!this.circular&&!center&&clip>wh)for(idx=index;;){if(--idx<0)break;if(curr=this.items().eq(idx),0===curr.length)break;if(dim=this.dimension(curr),0===dim)break;if(wh+=dim,update.first=curr,update.visible=update.visible.add(curr),margin=toFloat(curr.css("margin-"+lrb)),clip>=wh-margin&&(update.fullyvisible=update.fullyvisible.add(curr)),wh>=clip)break}return this._update(update),this.tail=0,center||"circular"===this.options("wrap")||"custom"===this.options("wrap")||this.index(update.last)!==this.items().length-1||(wh-=toFloat(update.last.css("margin-"+lrb)),wh>clip&&(this.tail=wh-clip)),this},_position:function(item){var first=this._first,pos=first.position()[this.lt],center=this.options("center"),centerOffset=center?this.clipping()/2-this.dimension(first)/2:0;return this.rtl&&!this.vertical?(pos-=this.relative?this.list().width()-this.dimension(first):this.clipping()-this.dimension(first),pos+=centerOffset):pos-=centerOffset,!center&&(this.index(item)>this.index(first)||this.inTail)&&this.tail?(pos=this.rtl&&!this.vertical?pos-this.tail:pos+this.tail,this.inTail=!0):this.inTail=!1,-pos},_update:function(update){var key,self=this,current={target:this._target||$(),first:this._first||$(),last:this._last||$(),visible:this._visible||$(),fullyvisible:this._fullyvisible||$()},back=this.index(update.first||current.first)<this.index(current.first),doUpdate=function(key){var elIn=[],elOut=[];update[key].each(function(){current[key].index(this)<0&&elIn.push(this)}),current[key].each(function(){update[key].index(this)<0&&elOut.push(this)}),back?elIn=elIn.reverse():elOut=elOut.reverse(),self._trigger(key+"in",$(elIn)),self._trigger(key+"out",$(elOut)),self["_"+key]=update[key]};for(key in update)doUpdate(key);return this}})}(jQuery,window),function($){"use strict";$.jcarousel.fn.scrollIntoView=function(target,animate,callback){var index,parsed=$.jCarousel.parseTarget(target),first=this.index(this._fullyvisible.first()),last=this.index(this._fullyvisible.last());if(index=parsed.relative?parsed.target<0?Math.max(0,first+parsed.target):last+parsed.target:"object"!=typeof parsed.target?parsed.target:this.index(parsed.target),first>index)return this.scroll(index,animate,callback);if(index>=first&&last>=index)return $.isFunction(callback)&&callback.call(this,!1),this;for(var curr,items=this.items(),clip=this.clipping(),lrb=this.vertical?"bottom":this.rtl?"left":"right",wh=0;;){if(curr=items.eq(index),0===curr.length)break;if(wh+=this.dimension(curr),wh>=clip){var margin=parseFloat(curr.css("margin-"+lrb))||0;wh-margin!==clip&&index++;break}if(0>=index)break;index--}return this.scroll(index,animate,callback)}}(jQuery),function($){"use strict";$.jCarousel.plugin("jcarouselControl",{_options:{target:"+=1",event:"click",method:"scroll"},_active:null,_init:function(){this.onDestroy=$.proxy(function(){this._destroy(),this.carousel().one("jcarousel:createend",$.proxy(this._create,this))},this),this.onReload=$.proxy(this._reload,this),this.onEvent=$.proxy(function(e){e.preventDefault();var method=this.options("method");$.isFunction(method)?method.call(this):this.carousel().jcarousel(this.options("method"),this.options("target"))},this)},_create:function(){this.carousel().one("jcarousel:destroy",this.onDestroy).on("jcarousel:reloadend jcarousel:scrollend",this.onReload),this._element.on(this.options("event")+".jcarouselcontrol",this.onEvent),this._reload()},_destroy:function(){this._element.off(".jcarouselcontrol",this.onEvent),this.carousel().off("jcarousel:destroy",this.onDestroy).off("jcarousel:reloadend jcarousel:scrollend",this.onReload)},_reload:function(){var active,parsed=$.jCarousel.parseTarget(this.options("target")),carousel=this.carousel();if(parsed.relative)active=carousel.jcarousel(parsed.target>0?"hasNext":"hasPrev");else{var target="object"!=typeof parsed.target?carousel.jcarousel("items").eq(parsed.target):parsed.target;active=carousel.jcarousel("target").index(target)>=0}return this._active!==active&&(this._trigger(active?"active":"inactive"),this._active=active),this}})}(jQuery),function($){"use strict";$.jCarousel.plugin("jcarouselPagination",{_options:{perPage:null,item:function(page){return'<a href="#'+page+'">'+page+"</a>"},event:"click",method:"scroll"},_carouselItems:null,_pages:{},_items:{},_currentPage:null,_init:function(){this.onDestroy=$.proxy(function(){this._destroy(),this.carousel().one("jcarousel:createend",$.proxy(this._create,this))},this),this.onReload=$.proxy(this._reload,this),this.onScroll=$.proxy(this._update,this)},_create:function(){this.carousel().one("jcarousel:destroy",this.onDestroy).on("jcarousel:reloadend",this.onReload).on("jcarousel:scrollend",this.onScroll),this._reload()},_destroy:function(){this._clear(),this.carousel().off("jcarousel:destroy",this.onDestroy).off("jcarousel:reloadend",this.onReload).off("jcarousel:scrollend",this.onScroll),this._carouselItems=null},_reload:function(){var perPage=this.options("perPage");if(this._pages={},this._items={},$.isFunction(perPage)&&(perPage=perPage.call(this)),null==perPage)this._pages=this._calculatePages();else for(var curr,pp=parseInt(perPage,10)||0,items=this._getCarouselItems(),page=1,i=0;;){if(curr=items.eq(i++),0===curr.length)break;this._pages[page]=this._pages[page]?this._pages[page].add(curr):curr,i%pp===0&&page++}this._clear();var self=this,carousel=this.carousel().data("jcarousel"),element=this._element,item=this.options("item"),numCarouselItems=this._getCarouselItems().length;$.each(this._pages,function(page,carouselItems){var currItem=self._items[page]=$(item.call(self,page,carouselItems));currItem.on(self.options("event")+".jcarouselpagination",$.proxy(function(){var target=carouselItems.eq(0);if(carousel.circular){var currentIndex=carousel.index(carousel.target()),newIndex=carousel.index(target);parseFloat(page)>parseFloat(self._currentPage)?currentIndex>newIndex&&(target="+="+(numCarouselItems-currentIndex+newIndex)):newIndex>currentIndex&&(target="-="+(currentIndex+(numCarouselItems-newIndex)))}carousel[this.options("method")](target)},self)),element.append(currItem)}),this._update()},_update:function(){var currentPage,target=this.carousel().jcarousel("target");$.each(this._pages,function(page,carouselItems){return carouselItems.each(function(){return target.is(this)?(currentPage=page,!1):void 0}),currentPage?!1:void 0}),this._currentPage!==currentPage&&(this._trigger("inactive",this._items[this._currentPage]),this._trigger("active",this._items[currentPage])),this._currentPage=currentPage},items:function(){return this._items},reloadCarouselItems:function(){return this._carouselItems=null,this},_clear:function(){this._element.empty(),this._currentPage=null},_calculatePages:function(){for(var curr,carousel=this.carousel().data("jcarousel"),items=this._getCarouselItems(),clip=carousel.clipping(),wh=0,idx=0,page=1,pages={};;){if(curr=items.eq(idx++),0===curr.length)break;pages[page]=pages[page]?pages[page].add(curr):curr,wh+=carousel.dimension(curr),wh>=clip&&(page++,wh=0)}return pages},_getCarouselItems:function(){return this._carouselItems||(this._carouselItems=this.carousel().jcarousel("items")),this._carouselItems}})}(jQuery),function($){"use strict";$.jCarousel.plugin("jcarouselAutoscroll",{_options:{target:"+=1",interval:3e3,autostart:!0},_timer:null,_init:function(){this.onDestroy=$.proxy(function(){this._destroy(),this.carousel().one("jcarousel:createend",$.proxy(this._create,this))},this),this.onAnimateEnd=$.proxy(this.start,this)},_create:function(){this.carousel().one("jcarousel:destroy",this.onDestroy),this.options("autostart")&&this.start()},_destroy:function(){this.stop(),this.carousel().off("jcarousel:destroy",this.onDestroy)},start:function(){return this.stop(),this.carousel().one("jcarousel:animateend",this.onAnimateEnd),this._timer=setTimeout($.proxy(function(){this.carousel().jcarousel("scroll",this.options("target"))},this),this.options("interval")),this},stop:function(){return this._timer&&(this._timer=clearTimeout(this._timer)),this.carousel().off("jcarousel:animateend",this.onAnimateEnd),this}})}(jQuery),function($){var plugin={},defaults={mode:"horizontal",slideSelector:"",infiniteLoop:!0,hideControlOnEnd:!1,speed:500,easing:null,slideMargin:0,startSlide:0,randomStart:!1,captions:!1,ticker:!1,tickerHover:!1,adaptiveHeight:!1,adaptiveHeightSpeed:500,video:!1,useCSS:!0,preloadImages:"visible",responsive:!0,slideZIndex:50,wrapperClass:"bx-wrapper",touchEnabled:!0,swipeThreshold:50,oneToOneTouch:!0,preventDefaultSwipeX:!0,preventDefaultSwipeY:!1,pager:!0,pagerType:"full",pagerShortSeparator:" / ",pagerSelector:null,buildPager:null,pagerCustom:null,controls:!0,nextText:"Next",prevText:"Prev",nextSelector:null,prevSelector:null,autoControls:!1,startText:"Start",stopText:"Stop",autoControlsCombine:!1,autoControlsSelector:null,auto:!1,pause:4e3,autoStart:!0,autoDirection:"next",autoHover:!1,autoDelay:0,autoSlideForOnePage:!1,minSlides:1,maxSlides:1,moveSlides:0,slideWidth:0,onSliderLoad:function(){},onSlideBefore:function(){},onSlideAfter:function(){},onSlideNext:function(){},onSlidePrev:function(){},onSliderResize:function(){}};$.fn.bxSlider=function(options){if(0==this.length)return this;if(this.length>1)return this.each(function(){$(this).bxSlider(options)}),this;var slider={},el=this;plugin.el=this;var windowWidth=$(window).width(),windowHeight=$(window).height(),init=function(){slider.settings=$.extend({},defaults,options),slider.settings.slideWidth=parseInt(slider.settings.slideWidth),slider.children=el.children(slider.settings.slideSelector),slider.children.length<slider.settings.minSlides&&(slider.settings.minSlides=slider.children.length),slider.children.length<slider.settings.maxSlides&&(slider.settings.maxSlides=slider.children.length),slider.settings.randomStart&&(slider.settings.startSlide=Math.floor(Math.random()*slider.children.length)),slider.active={index:slider.settings.startSlide},slider.carousel=slider.settings.minSlides>1||slider.settings.maxSlides>1,slider.carousel&&(slider.settings.preloadImages="all"),slider.minThreshold=slider.settings.minSlides*slider.settings.slideWidth+(slider.settings.minSlides-1)*slider.settings.slideMargin,slider.maxThreshold=slider.settings.maxSlides*slider.settings.slideWidth+(slider.settings.maxSlides-1)*slider.settings.slideMargin,slider.working=!1,slider.controls={},slider.interval=null,slider.animProp="vertical"==slider.settings.mode?"top":"left",slider.usingCSS=slider.settings.useCSS&&"fade"!=slider.settings.mode&&function(){var div=document.createElement("div"),props=["WebkitPerspective","MozPerspective","OPerspective","msPerspective"];for(var i in props)if(void 0!==div.style[props[i]])return slider.cssPrefix=props[i].replace("Perspective","").toLowerCase(),slider.animProp="-"+slider.cssPrefix+"-transform",!0;return!1}(),"vertical"==slider.settings.mode&&(slider.settings.maxSlides=slider.settings.minSlides),el.data("origStyle",el.attr("style")),el.children(slider.settings.slideSelector).each(function(){$(this).data("origStyle",$(this).attr("style"))}),setup()},setup=function(){el.wrap('<div class="'+slider.settings.wrapperClass+'"><div class="bx-viewport"></div></div>'),slider.viewport=el.parent(),slider.loader=$('<div class="bx-loading" />'),slider.viewport.prepend(slider.loader),el.css({width:"horizontal"==slider.settings.mode?100*slider.children.length+215+"%":"auto",position:"relative"}),slider.usingCSS&&slider.settings.easing?el.css("-"+slider.cssPrefix+"-transition-timing-function",slider.settings.easing):slider.settings.easing||(slider.settings.easing="swing");getNumberSlidesShowing();slider.viewport.css({width:"100%",overflow:"hidden",position:"relative"}),slider.viewport.parent().css({maxWidth:getViewportMaxWidth()}),slider.settings.pager||slider.viewport.parent().css({margin:"0 auto 0px"}),slider.children.css({"float":"horizontal"==slider.settings.mode?"left":"none",listStyle:"none",position:"relative"}),slider.children.css("width",getSlideWidth()),"horizontal"==slider.settings.mode&&slider.settings.slideMargin>0&&slider.children.css("marginRight",slider.settings.slideMargin),"vertical"==slider.settings.mode&&slider.settings.slideMargin>0&&slider.children.css("marginBottom",slider.settings.slideMargin),"fade"==slider.settings.mode&&(slider.children.css({position:"absolute",zIndex:0,display:"none"}),slider.children.eq(slider.settings.startSlide).css({zIndex:slider.settings.slideZIndex,display:"block"})),slider.controls.el=$('<div class="bx-controls" />'),slider.settings.captions&&appendCaptions(),slider.active.last=slider.settings.startSlide==getPagerQty()-1,slider.settings.video&&el.fitVids();var preloadSelector=slider.children.eq(slider.settings.startSlide);"all"==slider.settings.preloadImages&&(preloadSelector=slider.children),slider.settings.ticker?slider.settings.pager=!1:(slider.settings.pager&&appendPager(),slider.settings.controls&&appendControls(),slider.settings.auto&&slider.settings.autoControls&&appendControlsAuto(),(slider.settings.controls||slider.settings.autoControls||slider.settings.pager)&&slider.viewport.after(slider.controls.el)),loadElements(preloadSelector,start)},loadElements=function(selector,callback){var total=selector.find("img, iframe").length;if(0==total)return void callback();var count=0;selector.find("img, iframe").each(function(){$(this).one("load",function(){++count==total&&callback()}).each(function(){this.complete&&$(this).load()})})},start=function(){if(slider.settings.infiniteLoop&&"fade"!=slider.settings.mode&&!slider.settings.ticker){var slice="vertical"==slider.settings.mode?slider.settings.minSlides:slider.settings.maxSlides,sliceAppend=slider.children.slice(0,slice).clone().addClass("bx-clone"),slicePrepend=slider.children.slice(-slice).clone().addClass("bx-clone");el.append(sliceAppend).prepend(slicePrepend)}slider.loader.remove(),setSlidePosition(),"vertical"==slider.settings.mode&&(slider.settings.adaptiveHeight=!0),slider.viewport.height(getViewportHeight()),el.redrawSlider(),slider.settings.onSliderLoad(slider.active.index),slider.initialized=!0,slider.settings.responsive&&$(window).bind("resize",resizeWindow),slider.settings.auto&&slider.settings.autoStart&&(getPagerQty()>1||slider.settings.autoSlideForOnePage)&&initAuto(),slider.settings.ticker&&initTicker(),slider.settings.pager&&updatePagerActive(slider.settings.startSlide),slider.settings.controls&&updateDirectionControls(),slider.settings.touchEnabled&&!slider.settings.ticker&&initTouch()},getViewportHeight=function(){var height=0,children=$();if("vertical"==slider.settings.mode||slider.settings.adaptiveHeight)if(slider.carousel){var currentIndex=1==slider.settings.moveSlides?slider.active.index:slider.active.index*getMoveBy();for(children=slider.children.eq(currentIndex),i=1;i<=slider.settings.maxSlides-1;i++)children=children.add(currentIndex+i>=slider.children.length?slider.children.eq(i-1):slider.children.eq(currentIndex+i))}else children=slider.children.eq(slider.active.index);else children=slider.children;return"vertical"==slider.settings.mode?(children.each(function(){height+=$(this).outerHeight()}),slider.settings.slideMargin>0&&(height+=slider.settings.slideMargin*(slider.settings.minSlides-1))):height=Math.max.apply(Math,children.map(function(){return $(this).outerHeight(!1)}).get()),"border-box"==slider.viewport.css("box-sizing")?height+=parseFloat(slider.viewport.css("padding-top"))+parseFloat(slider.viewport.css("padding-bottom"))+parseFloat(slider.viewport.css("border-top-width"))+parseFloat(slider.viewport.css("border-bottom-width")):"padding-box"==slider.viewport.css("box-sizing")&&(height+=parseFloat(slider.viewport.css("padding-top"))+parseFloat(slider.viewport.css("padding-bottom"))),height},getViewportMaxWidth=function(){var width="100%";return slider.settings.slideWidth>0&&(width="horizontal"==slider.settings.mode?slider.settings.maxSlides*slider.settings.slideWidth+(slider.settings.maxSlides-1)*slider.settings.slideMargin:slider.settings.slideWidth),width},getSlideWidth=function(){var newElWidth=slider.settings.slideWidth,wrapWidth=slider.viewport.width();return 0==slider.settings.slideWidth||slider.settings.slideWidth>wrapWidth&&!slider.carousel||"vertical"==slider.settings.mode?newElWidth=wrapWidth:slider.settings.maxSlides>1&&"horizontal"==slider.settings.mode&&(wrapWidth>slider.maxThreshold||wrapWidth<slider.minThreshold&&(newElWidth=(wrapWidth-slider.settings.slideMargin*(slider.settings.minSlides-1))/slider.settings.minSlides)),newElWidth},getNumberSlidesShowing=function(){var slidesShowing=1;if("horizontal"==slider.settings.mode&&slider.settings.slideWidth>0)if(slider.viewport.width()<slider.minThreshold)slidesShowing=slider.settings.minSlides;else if(slider.viewport.width()>slider.maxThreshold)slidesShowing=slider.settings.maxSlides;else{var childWidth=slider.children.first().width()+slider.settings.slideMargin;slidesShowing=Math.floor((slider.viewport.width()+slider.settings.slideMargin)/childWidth)}else"vertical"==slider.settings.mode&&(slidesShowing=slider.settings.minSlides);return slidesShowing},getPagerQty=function(){var pagerQty=0;if(slider.settings.moveSlides>0)if(slider.settings.infiniteLoop)pagerQty=Math.ceil(slider.children.length/getMoveBy());else for(var breakPoint=0,counter=0;breakPoint<slider.children.length;)++pagerQty,breakPoint=counter+getNumberSlidesShowing(),counter+=slider.settings.moveSlides<=getNumberSlidesShowing()?slider.settings.moveSlides:getNumberSlidesShowing();else pagerQty=Math.ceil(slider.children.length/getNumberSlidesShowing());return pagerQty},getMoveBy=function(){return slider.settings.moveSlides>0&&slider.settings.moveSlides<=getNumberSlidesShowing()?slider.settings.moveSlides:getNumberSlidesShowing()},setSlidePosition=function(){if(slider.children.length>slider.settings.maxSlides&&slider.active.last&&!slider.settings.infiniteLoop){if("horizontal"==slider.settings.mode){var lastChild=slider.children.last(),position=lastChild.position();
setPositionProperty(-(position.left-(slider.viewport.width()-lastChild.outerWidth())),"reset",0)}else if("vertical"==slider.settings.mode){var lastShowingIndex=slider.children.length-slider.settings.minSlides,position=slider.children.eq(lastShowingIndex).position();setPositionProperty(-position.top,"reset",0)}}else{var position=slider.children.eq(slider.active.index*getMoveBy()).position();slider.active.index==getPagerQty()-1&&(slider.active.last=!0),void 0!=position&&("horizontal"==slider.settings.mode?setPositionProperty(-position.left,"reset",0):"vertical"==slider.settings.mode&&setPositionProperty(-position.top,"reset",0))}},setPositionProperty=function(value,type,duration,params){if(slider.usingCSS){var propValue="vertical"==slider.settings.mode?"translate3d(0, "+value+"px, 0)":"translate3d("+value+"px, 0, 0)";el.css("-"+slider.cssPrefix+"-transition-duration",duration/1e3+"s"),"slide"==type?(el.css(slider.animProp,propValue),el.bind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){el.unbind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd"),updateAfterSlideTransition()})):"reset"==type?el.css(slider.animProp,propValue):"ticker"==type&&(el.css("-"+slider.cssPrefix+"-transition-timing-function","linear"),el.css(slider.animProp,propValue),el.bind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){el.unbind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd"),setPositionProperty(params.resetValue,"reset",0),tickerLoop()}))}else{var animateObj={};animateObj[slider.animProp]=value,"slide"==type?el.animate(animateObj,duration,slider.settings.easing,function(){updateAfterSlideTransition()}):"reset"==type?el.css(slider.animProp,value):"ticker"==type&&el.animate(animateObj,speed,"linear",function(){setPositionProperty(params.resetValue,"reset",0),tickerLoop()})}},populatePager=function(){for(var pagerHtml="",pagerQty=getPagerQty(),i=0;pagerQty>i;i++){var linkContent="";slider.settings.buildPager&&$.isFunction(slider.settings.buildPager)?(linkContent=slider.settings.buildPager(i),slider.pagerEl.addClass("bx-custom-pager")):(linkContent=i+1,slider.pagerEl.addClass("bx-default-pager")),pagerHtml+='<div class="bx-pager-item"><a href="" data-slide-index="'+i+'" class="bx-pager-link">'+linkContent+"</a></div>"}slider.pagerEl.html(pagerHtml)},appendPager=function(){slider.settings.pagerCustom?slider.pagerEl=$(slider.settings.pagerCustom):(slider.pagerEl=$('<div class="bx-pager" />'),slider.settings.pagerSelector?$(slider.settings.pagerSelector).html(slider.pagerEl):slider.controls.el.addClass("bx-has-pager").append(slider.pagerEl),populatePager()),slider.pagerEl.on("click","a",clickPagerBind)},appendControls=function(){slider.controls.next=$('<a class="bx-next" href="">'+slider.settings.nextText+"</a>"),slider.controls.prev=$('<a class="bx-prev" href="">'+slider.settings.prevText+"</a>"),slider.controls.next.bind("click",clickNextBind),slider.controls.prev.bind("click",clickPrevBind),slider.settings.nextSelector&&$(slider.settings.nextSelector).append(slider.controls.next),slider.settings.prevSelector&&$(slider.settings.prevSelector).append(slider.controls.prev),slider.settings.nextSelector||slider.settings.prevSelector||(slider.controls.directionEl=$('<div class="bx-controls-direction" />'),slider.controls.directionEl.append(slider.controls.prev).append(slider.controls.next),slider.controls.el.addClass("bx-has-controls-direction").append(slider.controls.directionEl))},appendControlsAuto=function(){slider.controls.start=$('<div class="bx-controls-auto-item"><a class="bx-start" href="">'+slider.settings.startText+"</a></div>"),slider.controls.stop=$('<div class="bx-controls-auto-item"><a class="bx-stop" href="">'+slider.settings.stopText+"</a></div>"),slider.controls.autoEl=$('<div class="bx-controls-auto" />'),slider.controls.autoEl.on("click",".bx-start",clickStartBind),slider.controls.autoEl.on("click",".bx-stop",clickStopBind),slider.settings.autoControlsCombine?slider.controls.autoEl.append(slider.controls.start):slider.controls.autoEl.append(slider.controls.start).append(slider.controls.stop),slider.settings.autoControlsSelector?$(slider.settings.autoControlsSelector).html(slider.controls.autoEl):slider.controls.el.addClass("bx-has-controls-auto").append(slider.controls.autoEl),updateAutoControls(slider.settings.autoStart?"stop":"start")},appendCaptions=function(){slider.children.each(function(){var title=$(this).find("img:first").attr("title");void 0!=title&&(""+title).length&&$(this).parents(".bx-wrapper").append($(this).find("img:first").data("link")?'<div class="bx-caption"><a href="'+$(this).find("img:first").data("link")+'"><span class="caption__link">'+title+"</span></a></div>":'<div class="bx-caption"><span>'+title+"</span></div>")})},clickNextBind=function(e){slider.settings.auto&&el.stopAuto(),el.goToNextSlide(),e.preventDefault()},clickPrevBind=function(e){slider.settings.auto&&el.stopAuto(),el.goToPrevSlide(),e.preventDefault()},clickStartBind=function(e){el.startAuto(),e.preventDefault()},clickStopBind=function(e){el.stopAuto(),e.preventDefault()},clickPagerBind=function(e){slider.settings.auto&&el.stopAuto();var pagerLink=$(e.currentTarget);if(void 0!==pagerLink.attr("data-slide-index")){var pagerIndex=parseInt(pagerLink.attr("data-slide-index"));pagerIndex!=slider.active.index&&el.goToSlide(pagerIndex),e.preventDefault()}},updatePagerActive=function(slideIndex){var len=slider.children.length;return"short"==slider.settings.pagerType?(slider.settings.maxSlides>1&&(len=Math.ceil(slider.children.length/slider.settings.maxSlides)),void slider.pagerEl.html(slideIndex+1+slider.settings.pagerShortSeparator+len)):(slider.pagerEl.find("a").removeClass("active"),void slider.pagerEl.each(function(i,el){$(el).find("a").eq(slideIndex).addClass("active")}))},updateAfterSlideTransition=function(){if(slider.settings.infiniteLoop){var position="";0==slider.active.index?position=slider.children.eq(0).position():slider.active.index==getPagerQty()-1&&slider.carousel?position=slider.children.eq((getPagerQty()-1)*getMoveBy()).position():slider.active.index==slider.children.length-1&&(position=slider.children.eq(slider.children.length-1).position()),position&&("horizontal"==slider.settings.mode?setPositionProperty(-position.left,"reset",0):"vertical"==slider.settings.mode&&setPositionProperty(-position.top,"reset",0))}slider.working=!1,slider.settings.onSlideAfter(slider.children.eq(slider.active.index),slider.oldIndex,slider.active.index)},updateAutoControls=function(state){slider.settings.autoControlsCombine?slider.controls.autoEl.html(slider.controls[state]):(slider.controls.autoEl.find("a").removeClass("active"),slider.controls.autoEl.find("a:not(.bx-"+state+")").addClass("active"))},updateDirectionControls=function(){1==getPagerQty()?(slider.controls.prev.addClass("disabled"),slider.controls.next.addClass("disabled")):!slider.settings.infiniteLoop&&slider.settings.hideControlOnEnd&&(0==slider.active.index?(slider.controls.prev.addClass("disabled"),slider.controls.next.removeClass("disabled")):slider.active.index==getPagerQty()-1?(slider.controls.next.addClass("disabled"),slider.controls.prev.removeClass("disabled")):(slider.controls.prev.removeClass("disabled"),slider.controls.next.removeClass("disabled")))},initAuto=function(){if(slider.settings.autoDelay>0){setTimeout(el.startAuto,slider.settings.autoDelay)}else el.startAuto();slider.settings.autoHover&&el.hover(function(){slider.interval&&(el.stopAuto(!0),slider.autoPaused=!0)},function(){slider.autoPaused&&(el.startAuto(!0),slider.autoPaused=null)})},initTicker=function(){var startPosition=0;if("next"==slider.settings.autoDirection)el.append(slider.children.clone().addClass("bx-clone"));else{el.prepend(slider.children.clone().addClass("bx-clone"));var position=slider.children.first().position();startPosition="horizontal"==slider.settings.mode?-position.left:-position.top}setPositionProperty(startPosition,"reset",0),slider.settings.pager=!1,slider.settings.controls=!1,slider.settings.autoControls=!1,slider.settings.tickerHover&&!slider.usingCSS&&slider.viewport.hover(function(){el.stop()},function(){var totalDimens=0;slider.children.each(function(){totalDimens+="horizontal"==slider.settings.mode?$(this).outerWidth(!0):$(this).outerHeight(!0)});var ratio=slider.settings.speed/totalDimens,property="horizontal"==slider.settings.mode?"left":"top",newSpeed=ratio*(totalDimens-Math.abs(parseInt(el.css(property))));tickerLoop(newSpeed)}),tickerLoop()},tickerLoop=function(resumeSpeed){speed=resumeSpeed?resumeSpeed:slider.settings.speed;var position={left:0,top:0},reset={left:0,top:0};"next"==slider.settings.autoDirection?position=el.find(".bx-clone").first().position():reset=slider.children.first().position();var animateProperty="horizontal"==slider.settings.mode?-position.left:-position.top,resetValue="horizontal"==slider.settings.mode?-reset.left:-reset.top,params={resetValue:resetValue};setPositionProperty(animateProperty,"ticker",speed,params)},initTouch=function(){slider.touch={start:{x:0,y:0},end:{x:0,y:0}},slider.viewport.bind("touchstart",onTouchStart)},onTouchStart=function(e){if(slider.working)e.preventDefault();else{slider.touch.originalPos=el.position();var orig=e.originalEvent;slider.touch.start.x=orig.changedTouches[0].pageX,slider.touch.start.y=orig.changedTouches[0].pageY,slider.viewport.bind("touchmove",onTouchMove),slider.viewport.bind("touchend",onTouchEnd)}},onTouchMove=function(e){var orig=e.originalEvent,xMovement=Math.abs(orig.changedTouches[0].pageX-slider.touch.start.x),yMovement=Math.abs(orig.changedTouches[0].pageY-slider.touch.start.y);if(3*xMovement>yMovement&&slider.settings.preventDefaultSwipeX?e.preventDefault():3*yMovement>xMovement&&slider.settings.preventDefaultSwipeY&&e.preventDefault(),"fade"!=slider.settings.mode&&slider.settings.oneToOneTouch){var value=0;if("horizontal"==slider.settings.mode){var change=orig.changedTouches[0].pageX-slider.touch.start.x;value=slider.touch.originalPos.left+change}else{var change=orig.changedTouches[0].pageY-slider.touch.start.y;value=slider.touch.originalPos.top+change}setPositionProperty(value,"reset",0)}},onTouchEnd=function(e){slider.viewport.unbind("touchmove",onTouchMove);var orig=e.originalEvent,value=0;if(slider.touch.end.x=orig.changedTouches[0].pageX,slider.touch.end.y=orig.changedTouches[0].pageY,"fade"==slider.settings.mode){var distance=Math.abs(slider.touch.start.x-slider.touch.end.x);distance>=slider.settings.swipeThreshold&&(slider.touch.start.x>slider.touch.end.x?el.goToNextSlide():el.goToPrevSlide(),el.stopAuto())}else{var distance=0;"horizontal"==slider.settings.mode?(distance=slider.touch.end.x-slider.touch.start.x,value=slider.touch.originalPos.left):(distance=slider.touch.end.y-slider.touch.start.y,value=slider.touch.originalPos.top),!slider.settings.infiniteLoop&&(0==slider.active.index&&distance>0||slider.active.last&&0>distance)?setPositionProperty(value,"reset",200):Math.abs(distance)>=slider.settings.swipeThreshold?(0>distance?el.goToNextSlide():el.goToPrevSlide(),el.stopAuto()):setPositionProperty(value,"reset",200)}slider.viewport.unbind("touchend",onTouchEnd)},resizeWindow=function(){if(slider.initialized){var windowWidthNew=$(window).width(),windowHeightNew=$(window).height();(windowWidth!=windowWidthNew||windowHeight!=windowHeightNew)&&(windowWidth=windowWidthNew,windowHeight=windowHeightNew,el.redrawSlider(),slider.settings.onSliderResize.call(el,slider.active.index))}};return el.goToSlide=function(slideIndex,direction){if(!slider.working&&slider.active.index!=slideIndex)if(slider.working=!0,slider.oldIndex=slider.active.index,slider.active.index=0>slideIndex?getPagerQty()-1:slideIndex>=getPagerQty()?0:slideIndex,slider.settings.onSlideBefore(slider.children.eq(slider.active.index),slider.oldIndex,slider.active.index),"next"==direction?slider.settings.onSlideNext(slider.children.eq(slider.active.index),slider.oldIndex,slider.active.index):"prev"==direction&&slider.settings.onSlidePrev(slider.children.eq(slider.active.index),slider.oldIndex,slider.active.index),slider.active.last=slider.active.index>=getPagerQty()-1,slider.settings.pager&&updatePagerActive(slider.active.index),slider.settings.controls&&updateDirectionControls(),"fade"==slider.settings.mode)slider.settings.adaptiveHeight&&slider.viewport.height()!=getViewportHeight()&&slider.viewport.animate({height:getViewportHeight()},slider.settings.adaptiveHeightSpeed),slider.children.filter(":visible").fadeOut(slider.settings.speed).css({zIndex:0}),slider.children.eq(slider.active.index).css("zIndex",slider.settings.slideZIndex+1).fadeIn(slider.settings.speed,function(){$(this).css("zIndex",slider.settings.slideZIndex),updateAfterSlideTransition()});else{slider.settings.adaptiveHeight&&slider.viewport.height()!=getViewportHeight()&&slider.viewport.animate({height:getViewportHeight()},slider.settings.adaptiveHeightSpeed);var moveBy=0,position={left:0,top:0};if(!slider.settings.infiniteLoop&&slider.carousel&&slider.active.last)if("horizontal"==slider.settings.mode){var lastChild=slider.children.eq(slider.children.length-1);position=lastChild.position(),moveBy=slider.viewport.width()-lastChild.outerWidth()}else{var lastShowingIndex=slider.children.length-slider.settings.minSlides;position=slider.children.eq(lastShowingIndex).position()}else if(slider.carousel&&slider.active.last&&"prev"==direction){var eq=1==slider.settings.moveSlides?slider.settings.maxSlides-getMoveBy():(getPagerQty()-1)*getMoveBy()-(slider.children.length-slider.settings.maxSlides),lastChild=el.children(".bx-clone").eq(eq);position=lastChild.position()}else if("next"==direction&&0==slider.active.index)position=el.find("> .bx-clone").eq(slider.settings.maxSlides).position(),slider.active.last=!1;else if(slideIndex>=0){var requestEl=slideIndex*getMoveBy();position=slider.children.eq(requestEl).position()}if("undefined"!=typeof position){var value="horizontal"==slider.settings.mode?-(position.left-moveBy):-position.top;setPositionProperty(value,"slide",slider.settings.speed)}}},el.goToNextSlide=function(){if(slider.settings.infiniteLoop||!slider.active.last){var pagerIndex=parseInt(slider.active.index)+1;el.goToSlide(pagerIndex,"next")}},el.goToPrevSlide=function(){if(slider.settings.infiniteLoop||0!=slider.active.index){var pagerIndex=parseInt(slider.active.index)-1;el.goToSlide(pagerIndex,"prev")}},el.startAuto=function(preventControlUpdate){slider.interval||(slider.interval=setInterval(function(){"next"==slider.settings.autoDirection?el.goToNextSlide():el.goToPrevSlide()},slider.settings.pause),slider.settings.autoControls&&1!=preventControlUpdate&&updateAutoControls("stop"))},el.stopAuto=function(preventControlUpdate){slider.interval&&(clearInterval(slider.interval),slider.interval=null,slider.settings.autoControls&&1!=preventControlUpdate&&updateAutoControls("start"))},el.getCurrentSlide=function(){return slider.active.index},el.getCurrentSlideElement=function(){return slider.children.eq(slider.active.index)},el.getSlideCount=function(){return slider.children.length},el.redrawSlider=function(){slider.children.add(el.find(".bx-clone")).width(getSlideWidth()),slider.viewport.css("height",getViewportHeight()),slider.settings.ticker||setSlidePosition(),slider.active.last&&(slider.active.index=getPagerQty()-1),slider.active.index>=getPagerQty()&&(slider.active.last=!0),slider.settings.pager&&!slider.settings.pagerCustom&&(populatePager(),updatePagerActive(slider.active.index))},el.destroySlider=function(){slider.initialized&&(slider.initialized=!1,$(".bx-clone",this).remove(),slider.children.each(function(){void 0!=$(this).data("origStyle")?$(this).attr("style",$(this).data("origStyle")):$(this).removeAttr("style")}),void 0!=$(this).data("origStyle")?this.attr("style",$(this).data("origStyle")):$(this).removeAttr("style"),$(this).unwrap().unwrap(),slider.controls.el&&slider.controls.el.remove(),slider.controls.next&&slider.controls.next.remove(),slider.controls.prev&&slider.controls.prev.remove(),slider.pagerEl&&slider.settings.controls&&slider.pagerEl.remove(),$(".bx-caption",this).remove(),slider.controls.autoEl&&slider.controls.autoEl.remove(),clearInterval(slider.interval),slider.settings.responsive&&$(window).unbind("resize",resizeWindow))},el.reloadSlider=function(settings){void 0!=settings&&(options=settings),el.destroySlider(),init()},init(),this}}(jQuery),function(window,document,$,undefined){"use strict";var H=$("html"),W=$(window),D=$(document),F=$.fancybox=function(){F.open.apply(this,arguments)},IE=navigator.userAgent.match(/msie/i),didUpdate=null,isTouch=document.createTouch!==undefined,isQuery=function(obj){return obj&&obj.hasOwnProperty&&obj instanceof $},isString=function(str){return str&&"string"===$.type(str)},isPercentage=function(str){return isString(str)&&str.indexOf("%")>0},isScrollable=function(el){return el&&!(el.style.overflow&&"hidden"===el.style.overflow)&&(el.clientWidth&&el.scrollWidth>el.clientWidth||el.clientHeight&&el.scrollHeight>el.clientHeight)},getScalar=function(orig,dim){var value=parseInt(orig,10)||0;return dim&&isPercentage(orig)&&(value=F.getViewport()[dim]/100*value),Math.ceil(value)},getValue=function(value,dim){return getScalar(value,dim)+"px"};$.extend(F,{version:"2.1.5",defaults:{padding:15,margin:20,width:800,height:600,minWidth:100,minHeight:100,maxWidth:9999,maxHeight:9999,pixelRatio:1,autoSize:!0,autoHeight:!1,autoWidth:!1,autoResize:!0,autoCenter:!isTouch,fitToView:!0,aspectRatio:!1,topRatio:.5,leftRatio:.5,scrolling:"auto",wrapCSS:"",arrows:!0,closeBtn:!0,closeClick:!1,nextClick:!1,mouseWheel:!0,autoPlay:!1,playSpeed:3e3,preload:3,modal:!1,loop:!0,ajax:{dataType:"html",headers:{"X-fancyBox":!0}},iframe:{scrolling:"auto",preload:!0},swf:{wmode:"transparent",allowfullscreen:"true",allowscriptaccess:"always"},keys:{next:{13:"left",34:"up",39:"left",40:"up"},prev:{8:"right",33:"down",37:"right",38:"down"},close:[27],play:[32],toggle:[70]},direction:{next:"left",prev:"right"},scrollOutside:!0,index:0,type:null,href:null,content:null,title:null,tpl:{wrap:'<div class="fancybox-wrap" tabIndex="-1"><div class="fancybox-skin"><div class="fancybox-outer"><div class="fancybox-inner"></div></div></div></div>',image:'<img class="fancybox-image" src="{href}" alt="" />',iframe:'<iframe id="fancybox-frame{rnd}" name="fancybox-frame{rnd}" class="fancybox-iframe" frameborder="0" vspace="0" hspace="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen'+(IE?' allowtransparency="true"':"")+"></iframe>",error:'<p class="fancybox-error">The requested content cannot be loaded.<br/>Please try again later.</p>',closeBtn:'<a title="Close" class="fancybox-item fancybox-close" href="javascript:;"></a>',next:'<a title="Next" class="fancybox-nav fancybox-next" href="javascript:;"><span></span></a>',prev:'<a title="Previous" class="fancybox-nav fancybox-prev" href="javascript:;"><span></span></a>'},openEffect:"fade",openSpeed:250,openEasing:"swing",openOpacity:!0,openMethod:"zoomIn",closeEffect:"fade",closeSpeed:250,closeEasing:"swing",closeOpacity:!0,closeMethod:"zoomOut",nextEffect:"elastic",nextSpeed:250,nextEasing:"swing",nextMethod:"changeIn",prevEffect:"elastic",prevSpeed:250,prevEasing:"swing",prevMethod:"changeOut",helpers:{overlay:!0,title:!0},onCancel:$.noop,beforeLoad:$.noop,afterLoad:$.noop,beforeShow:$.noop,afterShow:$.noop,beforeChange:$.noop,beforeClose:$.noop,afterClose:$.noop},group:{},opts:{},previous:null,coming:null,current:null,isActive:!1,isOpen:!1,isOpened:!1,wrap:null,skin:null,outer:null,inner:null,player:{timer:null,isActive:!1},ajaxLoad:null,imgPreload:null,transitions:{},helpers:{},open:function(group,opts){return group&&($.isPlainObject(opts)||(opts={}),!1!==F.close(!0))?($.isArray(group)||(group=isQuery(group)?$(group).get():[group]),$.each(group,function(i,element){var href,title,content,type,rez,hrefParts,selector,obj={};"object"===$.type(element)&&(element.nodeType&&(element=$(element)),isQuery(element)?(obj={href:element.data("fancybox-href")||element.attr("href"),title:element.data("fancybox-title")||element.attr("title"),isDom:!0,element:element},$.metadata&&$.extend(!0,obj,element.metadata())):obj=element),href=opts.href||obj.href||(isString(element)?element:null),title=opts.title!==undefined?opts.title:obj.title||"",content=opts.content||obj.content,type=content?"html":opts.type||obj.type,!type&&obj.isDom&&(type=element.data("fancybox-type"),type||(rez=element.prop("class").match(/fancybox\.(\w+)/),type=rez?rez[1]:null)),isString(href)&&(type||(F.isImage(href)?type="image":F.isSWF(href)?type="swf":"#"===href.charAt(0)?type="inline":isString(element)&&(type="html",content=element)),"ajax"===type&&(hrefParts=href.split(/\s+/,2),href=hrefParts.shift(),selector=hrefParts.shift())),content||("inline"===type?href?content=$(isString(href)?href.replace(/.*(?=#[^\s]+$)/,""):href):obj.isDom&&(content=element):"html"===type?content=href:type||href||!obj.isDom||(type="inline",content=element)),$.extend(obj,{href:href,type:type,content:content,title:title,selector:selector}),group[i]=obj}),F.opts=$.extend(!0,{},F.defaults,opts),opts.keys!==undefined&&(F.opts.keys=opts.keys?$.extend({},F.defaults.keys,opts.keys):!1),F.group=group,F._start(F.opts.index)):void 0},cancel:function(){var coming=F.coming;coming&&!1!==F.trigger("onCancel")&&(F.hideLoading(),F.ajaxLoad&&F.ajaxLoad.abort(),F.ajaxLoad=null,F.imgPreload&&(F.imgPreload.onload=F.imgPreload.onerror=null),coming.wrap&&coming.wrap.stop(!0,!0).trigger("onReset").remove(),F.coming=null,F.current||F._afterZoomOut(coming))},close:function(event){F.cancel(),!1!==F.trigger("beforeClose")&&(F.unbindEvents(),F.isActive&&(F.isOpen&&event!==!0?(F.isOpen=F.isOpened=!1,F.isClosing=!0,$(".fancybox-item, .fancybox-nav").remove(),F.wrap.stop(!0,!0).removeClass("fancybox-opened"),F.transitions[F.current.closeMethod]()):($(".fancybox-wrap").stop(!0).trigger("onReset").remove(),F._afterZoomOut())))},play:function(action){var clear=function(){clearTimeout(F.player.timer)},set=function(){clear(),F.current&&F.player.isActive&&(F.player.timer=setTimeout(F.next,F.current.playSpeed))},stop=function(){clear(),D.unbind(".player"),F.player.isActive=!1,F.trigger("onPlayEnd")},start=function(){F.current&&(F.current.loop||F.current.index<F.group.length-1)&&(F.player.isActive=!0,D.bind({"onCancel.player beforeClose.player":stop,"onUpdate.player":set,"beforeLoad.player":clear}),set(),F.trigger("onPlayStart"))};action===!0||!F.player.isActive&&action!==!1?start():stop()},next:function(direction){var current=F.current;current&&(isString(direction)||(direction=current.direction.next),F.jumpto(current.index+1,direction,"next"))},prev:function(direction){var current=F.current;current&&(isString(direction)||(direction=current.direction.prev),F.jumpto(current.index-1,direction,"prev"))},jumpto:function(index,direction,router){var current=F.current;current&&(index=getScalar(index),F.direction=direction||current.direction[index>=current.index?"next":"prev"],F.router=router||"jumpto",current.loop&&(0>index&&(index=current.group.length+index%current.group.length),index%=current.group.length),current.group[index]!==undefined&&(F.cancel(),F._start(index)))},reposition:function(e,onlyAbsolute){var pos,current=F.current,wrap=current?current.wrap:null;wrap&&(pos=F._getPosition(onlyAbsolute),e&&"scroll"===e.type?(delete pos.position,wrap.stop(!0,!0).animate(pos,200)):(wrap.css(pos),current.pos=$.extend({},current.dim,pos)))},update:function(e){var type=e&&e.type,anyway=!type||"orientationchange"===type;anyway&&(clearTimeout(didUpdate),didUpdate=null),F.isOpen&&!didUpdate&&(didUpdate=setTimeout(function(){var current=F.current;current&&!F.isClosing&&(F.wrap.removeClass("fancybox-tmp"),(anyway||"load"===type||"resize"===type&&current.autoResize)&&F._setDimension(),"scroll"===type&&current.canShrink||F.reposition(e),F.trigger("onUpdate"),didUpdate=null)},anyway&&!isTouch?0:300))},toggle:function(action){F.isOpen&&(F.current.fitToView="boolean"===$.type(action)?action:!F.current.fitToView,isTouch&&(F.wrap.removeAttr("style").addClass("fancybox-tmp"),F.trigger("onUpdate")),F.update())},hideLoading:function(){D.unbind(".loading"),$("#fancybox-loading").remove()},showLoading:function(){var el,viewport;F.hideLoading(),el=$('<div id="fancybox-loading"><div></div></div>').click(F.cancel).appendTo("body"),D.bind("keydown.loading",function(e){27===(e.which||e.keyCode)&&(e.preventDefault(),F.cancel())}),F.defaults.fixed||(viewport=F.getViewport(),el.css({position:"absolute",top:.5*viewport.h+viewport.y,left:.5*viewport.w+viewport.x}))},getViewport:function(){var locked=F.current&&F.current.locked||!1,rez={x:W.scrollLeft(),y:W.scrollTop()};return locked?(rez.w=locked[0].clientWidth,rez.h=locked[0].clientHeight):(rez.w=isTouch&&window.innerWidth?window.innerWidth:W.width(),rez.h=isTouch&&window.innerHeight?window.innerHeight:W.height()),rez},unbindEvents:function(){F.wrap&&isQuery(F.wrap)&&F.wrap.unbind(".fb"),D.unbind(".fb"),W.unbind(".fb")},bindEvents:function(){var keys,current=F.current;current&&(W.bind("orientationchange.fb"+(isTouch?"":" resize.fb")+(current.autoCenter&&!current.locked?" scroll.fb":""),F.update),keys=current.keys,keys&&D.bind("keydown.fb",function(e){var code=e.which||e.keyCode,target=e.target||e.srcElement;return 27===code&&F.coming?!1:void(e.ctrlKey||e.altKey||e.shiftKey||e.metaKey||target&&(target.type||$(target).is("[contenteditable]"))||$.each(keys,function(i,val){return current.group.length>1&&val[code]!==undefined?(F[i](val[code]),e.preventDefault(),!1):$.inArray(code,val)>-1?(F[i](),e.preventDefault(),!1):void 0}))}),$.fn.mousewheel&&current.mouseWheel&&F.wrap.bind("mousewheel.fb",function(e,delta,deltaX,deltaY){for(var target=e.target||null,parent=$(target),canScroll=!1;parent.length&&!(canScroll||parent.is(".fancybox-skin")||parent.is(".fancybox-wrap"));)canScroll=isScrollable(parent[0]),parent=$(parent).parent();0===delta||canScroll||F.group.length>1&&!current.canShrink&&(deltaY>0||deltaX>0?F.prev(deltaY>0?"down":"left"):(0>deltaY||0>deltaX)&&F.next(0>deltaY?"up":"right"),e.preventDefault())}))},trigger:function(event,o){var ret,obj=o||F.coming||F.current;if(obj){if($.isFunction(obj[event])&&(ret=obj[event].apply(obj,Array.prototype.slice.call(arguments,1))),ret===!1)return!1;obj.helpers&&$.each(obj.helpers,function(helper,opts){opts&&F.helpers[helper]&&$.isFunction(F.helpers[helper][event])&&F.helpers[helper][event]($.extend(!0,{},F.helpers[helper].defaults,opts),obj)}),D.trigger(event)}},isImage:function(str){return isString(str)&&str.match(/(^data:image\/.*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg)((\?|#).*)?$)/i)},isSWF:function(str){return isString(str)&&str.match(/\.(swf)((\?|#).*)?$/i)},_start:function(index){var obj,href,type,margin,padding,coming={};if(index=getScalar(index),obj=F.group[index]||null,!obj)return!1;if(coming=$.extend(!0,{},F.opts,obj),margin=coming.margin,padding=coming.padding,"number"===$.type(margin)&&(coming.margin=[margin,margin,margin,margin]),"number"===$.type(padding)&&(coming.padding=[padding,padding,padding,padding]),coming.modal&&$.extend(!0,coming,{closeBtn:!1,closeClick:!1,nextClick:!1,arrows:!1,mouseWheel:!1,keys:null,helpers:{overlay:{closeClick:!1}}}),coming.autoSize&&(coming.autoWidth=coming.autoHeight=!0),"auto"===coming.width&&(coming.autoWidth=!0),"auto"===coming.height&&(coming.autoHeight=!0),coming.group=F.group,coming.index=index,F.coming=coming,!1===F.trigger("beforeLoad"))return void(F.coming=null);if(type=coming.type,href=coming.href,!type)return F.coming=null,F.current&&F.router&&"jumpto"!==F.router?(F.current.index=index,F[F.router](F.direction)):!1;if(F.isActive=!0,("image"===type||"swf"===type)&&(coming.autoHeight=coming.autoWidth=!1,coming.scrolling="visible"),"image"===type&&(coming.aspectRatio=!0),"iframe"===type&&isTouch&&(coming.scrolling="scroll"),coming.wrap=$(coming.tpl.wrap).addClass("fancybox-"+(isTouch?"mobile":"desktop")+" fancybox-type-"+type+" fancybox-tmp "+coming.wrapCSS).appendTo(coming.parent||"body"),$.extend(coming,{skin:$(".fancybox-skin",coming.wrap),outer:$(".fancybox-outer",coming.wrap),inner:$(".fancybox-inner",coming.wrap)}),$.each(["Top","Right","Bottom","Left"],function(i,v){coming.skin.css("padding"+v,getValue(coming.padding[i]))}),F.trigger("onReady"),"inline"===type||"html"===type){if(!coming.content||!coming.content.length)return F._error("content")}else if(!href)return F._error("href");"image"===type?F._loadImage():"ajax"===type?F._loadAjax():"iframe"===type?F._loadIframe():F._afterLoad()},_error:function(type){$.extend(F.coming,{type:"html",autoWidth:!0,autoHeight:!0,minWidth:0,minHeight:0,scrolling:"no",hasError:type,content:F.coming.tpl.error}),F._afterLoad()},_loadImage:function(){var img=F.imgPreload=new Image;img.onload=function(){this.onload=this.onerror=null,F.coming.width=this.width/F.opts.pixelRatio,F.coming.height=this.height/F.opts.pixelRatio,F._afterLoad()},img.onerror=function(){this.onload=this.onerror=null,F._error("image")},img.src=F.coming.href,img.complete!==!0&&F.showLoading()},_loadAjax:function(){var coming=F.coming;F.showLoading(),F.ajaxLoad=$.ajax($.extend({},coming.ajax,{url:coming.href,error:function(jqXHR,textStatus){F.coming&&"abort"!==textStatus?F._error("ajax",jqXHR):F.hideLoading()},success:function(data,textStatus){"success"===textStatus&&(coming.content=data,F._afterLoad())}}))},_loadIframe:function(){var coming=F.coming,iframe=$(coming.tpl.iframe.replace(/\{rnd\}/g,(new Date).getTime())).attr("scrolling",isTouch?"auto":coming.iframe.scrolling).attr("src",coming.href);$(coming.wrap).bind("onReset",function(){try{$(this).find("iframe").hide().attr("src","//about:blank").end().empty()}catch(e){}}),coming.iframe.preload&&(F.showLoading(),iframe.one("load",function(){$(this).data("ready",1),isTouch||$(this).bind("load.fb",F.update),$(this).parents(".fancybox-wrap").width("100%").removeClass("fancybox-tmp").show(),F._afterLoad()})),coming.content=iframe.appendTo(coming.inner),coming.iframe.preload||F._afterLoad()},_preloadImages:function(){var item,i,group=F.group,current=F.current,len=group.length,cnt=current.preload?Math.min(current.preload,len-1):0;for(i=1;cnt>=i;i+=1)item=group[(current.index+i)%len],"image"===item.type&&item.href&&((new Image).src=item.href)},_afterLoad:function(){var current,content,type,scrolling,href,embed,coming=F.coming,previous=F.current,placeholder="fancybox-placeholder";if(F.hideLoading(),coming&&F.isActive!==!1){if(!1===F.trigger("afterLoad",coming,previous))return coming.wrap.stop(!0).trigger("onReset").remove(),void(F.coming=null);switch(previous&&(F.trigger("beforeChange",previous),previous.wrap.stop(!0).removeClass("fancybox-opened").find(".fancybox-item, .fancybox-nav").remove()),F.unbindEvents(),current=coming,content=coming.content,type=coming.type,scrolling=coming.scrolling,$.extend(F,{wrap:current.wrap,skin:current.skin,outer:current.outer,inner:current.inner,current:current,previous:previous}),href=current.href,type){case"inline":case"ajax":case"html":current.selector?content=$("<div>").html(content).find(current.selector):isQuery(content)&&(content.data(placeholder)||content.data(placeholder,$('<div class="'+placeholder+'"></div>').insertAfter(content).hide()),content=content.show().detach(),current.wrap.bind("onReset",function(){$(this).find(content).length&&content.hide().replaceAll(content.data(placeholder)).data(placeholder,!1)}));break;case"image":content=current.tpl.image.replace("{href}",href);break;case"swf":content='<object id="fancybox-swf" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="100%" height="100%"><param name="movie" value="'+href+'"></param>',embed="",$.each(current.swf,function(name,val){content+='<param name="'+name+'" value="'+val+'"></param>',embed+=" "+name+'="'+val+'"'}),content+='<embed src="'+href+'" type="application/x-shockwave-flash" width="100%" height="100%"'+embed+"></embed></object>"}isQuery(content)&&content.parent().is(current.inner)||current.inner.append(content),F.trigger("beforeShow"),current.inner.css("overflow","yes"===scrolling?"scroll":"no"===scrolling?"hidden":scrolling),F._setDimension(),F.reposition(),F.isOpen=!1,F.coming=null,F.bindEvents(),F.isOpened?previous.prevMethod&&F.transitions[previous.prevMethod]():$(".fancybox-wrap").not(current.wrap).stop(!0).trigger("onReset").remove(),F.transitions[F.isOpened?current.nextMethod:current.openMethod](),F._preloadImages()
}},_setDimension:function(){var wPadding,hPadding,wSpace,hSpace,origWidth,origHeight,origMaxWidth,origMaxHeight,ratio,width_,height_,maxWidth_,maxHeight_,iframe,body,viewport=F.getViewport(),steps=0,canShrink=!1,canExpand=!1,wrap=F.wrap,skin=F.skin,inner=F.inner,current=F.current,width=current.width,height=current.height,minWidth=current.minWidth,minHeight=current.minHeight,maxWidth=current.maxWidth,maxHeight=current.maxHeight,scrolling=current.scrolling,scrollOut=current.scrollOutside?current.scrollbarWidth:0,margin=current.margin,wMargin=getScalar(margin[1]+margin[3]),hMargin=getScalar(margin[0]+margin[2]);if(wrap.add(skin).add(inner).width("auto").height("auto").removeClass("fancybox-tmp"),wPadding=getScalar(skin.outerWidth(!0)-skin.width()),hPadding=getScalar(skin.outerHeight(!0)-skin.height()),wSpace=wMargin+wPadding,hSpace=hMargin+hPadding,origWidth=isPercentage(width)?(viewport.w-wSpace)*getScalar(width)/100:width,origHeight=isPercentage(height)?(viewport.h-hSpace)*getScalar(height)/100:height,"iframe"===current.type){if(iframe=current.content,current.autoHeight&&1===iframe.data("ready"))try{iframe[0].contentWindow.document.location&&(inner.width(origWidth).height(9999),body=iframe.contents().find("body"),scrollOut&&body.css("overflow-x","hidden"),origHeight=body.outerHeight(!0))}catch(e){}}else(current.autoWidth||current.autoHeight)&&(inner.addClass("fancybox-tmp"),current.autoWidth||inner.width(origWidth),current.autoHeight||inner.height(origHeight),current.autoWidth&&(origWidth=inner.width()),current.autoHeight&&(origHeight=inner.height()),inner.removeClass("fancybox-tmp"));if(width=getScalar(origWidth),height=getScalar(origHeight),ratio=origWidth/origHeight,minWidth=getScalar(isPercentage(minWidth)?getScalar(minWidth,"w")-wSpace:minWidth),maxWidth=getScalar(isPercentage(maxWidth)?getScalar(maxWidth,"w")-wSpace:maxWidth),minHeight=getScalar(isPercentage(minHeight)?getScalar(minHeight,"h")-hSpace:minHeight),maxHeight=getScalar(isPercentage(maxHeight)?getScalar(maxHeight,"h")-hSpace:maxHeight),origMaxWidth=maxWidth,origMaxHeight=maxHeight,current.fitToView&&(maxWidth=Math.min(viewport.w-wSpace,maxWidth),maxHeight=Math.min(viewport.h-hSpace,maxHeight)),maxWidth_=viewport.w-wMargin,maxHeight_=viewport.h-hMargin,current.aspectRatio?(width>maxWidth&&(width=maxWidth,height=getScalar(width/ratio)),height>maxHeight&&(height=maxHeight,width=getScalar(height*ratio)),minWidth>width&&(width=minWidth,height=getScalar(width/ratio)),minHeight>height&&(height=minHeight,width=getScalar(height*ratio))):(width=Math.max(minWidth,Math.min(width,maxWidth)),current.autoHeight&&"iframe"!==current.type&&(inner.width(width),height=inner.height()),height=Math.max(minHeight,Math.min(height,maxHeight))),current.fitToView)if(inner.width(width).height(height),wrap.width(width+wPadding),width_=wrap.width(),height_=wrap.height(),current.aspectRatio)for(;(width_>maxWidth_||height_>maxHeight_)&&width>minWidth&&height>minHeight&&!(steps++>19);)height=Math.max(minHeight,Math.min(maxHeight,height-10)),width=getScalar(height*ratio),minWidth>width&&(width=minWidth,height=getScalar(width/ratio)),width>maxWidth&&(width=maxWidth,height=getScalar(width/ratio)),inner.width(width).height(height),wrap.width(width+wPadding),width_=wrap.width(),height_=wrap.height();else width=Math.max(minWidth,Math.min(width,width-(width_-maxWidth_))),height=Math.max(minHeight,Math.min(height,height-(height_-maxHeight_)));scrollOut&&"auto"===scrolling&&origHeight>height&&maxWidth_>width+wPadding+scrollOut&&(width+=scrollOut),inner.width(width).height(height),wrap.width(width+wPadding),width_=wrap.width(),height_=wrap.height(),canShrink=(width_>maxWidth_||height_>maxHeight_)&&width>minWidth&&height>minHeight,canExpand=current.aspectRatio?origMaxWidth>width&&origMaxHeight>height&&origWidth>width&&origHeight>height:(origMaxWidth>width||origMaxHeight>height)&&(origWidth>width||origHeight>height),$.extend(current,{dim:{width:getValue(width_),height:getValue(height_)},origWidth:origWidth,origHeight:origHeight,canShrink:canShrink,canExpand:canExpand,wPadding:wPadding,hPadding:hPadding,wrapSpace:height_-skin.outerHeight(!0),skinSpace:skin.height()-height}),!iframe&&current.autoHeight&&height>minHeight&&maxHeight>height&&!canExpand&&inner.height("auto")},_getPosition:function(onlyAbsolute){var current=F.current,viewport=F.getViewport(),margin=current.margin,width=F.wrap.width()+margin[1]+margin[3],height=F.wrap.height()+margin[0]+margin[2],rez={position:"absolute",top:margin[0],left:margin[3]};return current.autoCenter&&current.fixed&&!onlyAbsolute&&height<=viewport.h&&width<=viewport.w?rez.position="fixed":current.locked||(rez.top+=viewport.y,rez.left+=viewport.x),rez.top=getValue(Math.max(rez.top,rez.top+(viewport.h-height)*current.topRatio)),rez.left=getValue(Math.max(rez.left,rez.left+(viewport.w-width)*current.leftRatio)),rez},_afterZoomIn:function(){var current=F.current;current&&(F.isOpen=F.isOpened=!0,F.wrap.css("overflow","visible").addClass("fancybox-opened"),F.update(),(current.closeClick||current.nextClick&&F.group.length>1)&&F.inner.css("cursor","pointer").bind("click.fb",function(e){$(e.target).is("a")||$(e.target).parent().is("a")||(e.preventDefault(),F[current.closeClick?"close":"next"]())}),current.closeBtn&&$(current.tpl.closeBtn).appendTo(F.skin).bind("click.fb",function(e){e.preventDefault(),F.close()}),current.arrows&&F.group.length>1&&((current.loop||current.index>0)&&$(current.tpl.prev).appendTo(F.outer).bind("click.fb",F.prev),(current.loop||current.index<F.group.length-1)&&$(current.tpl.next).appendTo(F.outer).bind("click.fb",F.next)),F.trigger("afterShow"),current.loop||current.index!==current.group.length-1?F.opts.autoPlay&&!F.player.isActive&&(F.opts.autoPlay=!1,F.play()):F.play(!1))},_afterZoomOut:function(obj){obj=obj||F.current,$(".fancybox-wrap").trigger("onReset").remove(),$.extend(F,{group:{},opts:{},router:!1,current:null,isActive:!1,isOpened:!1,isOpen:!1,isClosing:!1,wrap:null,skin:null,outer:null,inner:null}),F.trigger("afterClose",obj)}}),F.transitions={getOrigPosition:function(){var current=F.current,element=current.element,orig=current.orig,pos={},width=50,height=50,hPadding=current.hPadding,wPadding=current.wPadding,viewport=F.getViewport();return!orig&&current.isDom&&element.is(":visible")&&(orig=element.find("img:first"),orig.length||(orig=element)),isQuery(orig)?(pos=orig.offset(),orig.is("img")&&(width=orig.outerWidth(),height=orig.outerHeight())):(pos.top=viewport.y+(viewport.h-height)*current.topRatio,pos.left=viewport.x+(viewport.w-width)*current.leftRatio),("fixed"===F.wrap.css("position")||current.locked)&&(pos.top-=viewport.y,pos.left-=viewport.x),pos={top:getValue(pos.top-hPadding*current.topRatio),left:getValue(pos.left-wPadding*current.leftRatio),width:getValue(width+wPadding),height:getValue(height+hPadding)}},step:function(now,fx){var ratio,padding,value,prop=fx.prop,current=F.current,wrapSpace=current.wrapSpace,skinSpace=current.skinSpace;("width"===prop||"height"===prop)&&(ratio=fx.end===fx.start?1:(now-fx.start)/(fx.end-fx.start),F.isClosing&&(ratio=1-ratio),padding="width"===prop?current.wPadding:current.hPadding,value=now-padding,F.skin[prop](getScalar("width"===prop?value:value-wrapSpace*ratio)),F.inner[prop](getScalar("width"===prop?value:value-wrapSpace*ratio-skinSpace*ratio)))},zoomIn:function(){var current=F.current,startPos=current.pos,effect=current.openEffect,elastic="elastic"===effect,endPos=$.extend({opacity:1},startPos);delete endPos.position,elastic?(startPos=this.getOrigPosition(),current.openOpacity&&(startPos.opacity=.1)):"fade"===effect&&(startPos.opacity=.1),F.wrap.css(startPos).animate(endPos,{duration:"none"===effect?0:current.openSpeed,easing:current.openEasing,step:elastic?this.step:null,complete:F._afterZoomIn})},zoomOut:function(){var current=F.current,effect=current.closeEffect,elastic="elastic"===effect,endPos={opacity:.1};elastic&&(endPos=this.getOrigPosition(),current.closeOpacity&&(endPos.opacity=.1)),F.wrap.animate(endPos,{duration:"none"===effect?0:current.closeSpeed,easing:current.closeEasing,step:elastic?this.step:null,complete:F._afterZoomOut})},changeIn:function(){var field,current=F.current,effect=current.nextEffect,startPos=current.pos,endPos={opacity:1},direction=F.direction,distance=200;startPos.opacity=.1,"elastic"===effect&&(field="down"===direction||"up"===direction?"top":"left","down"===direction||"right"===direction?(startPos[field]=getValue(getScalar(startPos[field])-distance),endPos[field]="+="+distance+"px"):(startPos[field]=getValue(getScalar(startPos[field])+distance),endPos[field]="-="+distance+"px")),"none"===effect?F._afterZoomIn():F.wrap.css(startPos).animate(endPos,{duration:current.nextSpeed,easing:current.nextEasing,complete:F._afterZoomIn})},changeOut:function(){var previous=F.previous,effect=previous.prevEffect,endPos={opacity:.1},direction=F.direction,distance=200;"elastic"===effect&&(endPos["down"===direction||"up"===direction?"top":"left"]=("up"===direction||"left"===direction?"-":"+")+"="+distance+"px"),previous.wrap.animate(endPos,{duration:"none"===effect?0:previous.prevSpeed,easing:previous.prevEasing,complete:function(){$(this).trigger("onReset").remove()}})}},F.helpers.overlay={defaults:{closeClick:!0,speedOut:200,showEarly:!0,css:{},locked:!isTouch,fixed:!0},overlay:null,fixed:!1,el:$("html"),create:function(opts){opts=$.extend({},this.defaults,opts),this.overlay&&this.close(),this.overlay=$('<div class="fancybox-overlay"></div>').appendTo(F.coming?F.coming.parent:opts.parent),this.fixed=!1,opts.fixed&&F.defaults.fixed&&(this.overlay.addClass("fancybox-overlay-fixed"),this.fixed=!0)},open:function(opts){var that=this;opts=$.extend({},this.defaults,opts),this.overlay?this.overlay.unbind(".overlay").width("auto").height("auto"):this.create(opts),this.fixed||(W.bind("resize.overlay",$.proxy(this.update,this)),this.update()),opts.closeClick&&this.overlay.bind("click.overlay",function(e){return $(e.target).hasClass("fancybox-overlay")?(F.isActive?F.close():that.close(),!1):void 0}),this.overlay.css(opts.css).show()},close:function(){var scrollV,scrollH;W.unbind("resize.overlay"),this.el.hasClass("fancybox-lock")&&($(".fancybox-margin").removeClass("fancybox-margin"),scrollV=W.scrollTop(),scrollH=W.scrollLeft(),this.el.removeClass("fancybox-lock"),W.scrollTop(scrollV).scrollLeft(scrollH)),$(".fancybox-overlay").remove().hide(),$.extend(this,{overlay:null,fixed:!1})},update:function(){var offsetWidth,width="100%";this.overlay.width(width).height("100%"),IE?(offsetWidth=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth),D.width()>offsetWidth&&(width=D.width())):D.width()>W.width()&&(width=D.width()),this.overlay.width(width).height(D.height())},onReady:function(opts,obj){var overlay=this.overlay;$(".fancybox-overlay").stop(!0,!0),overlay||this.create(opts),opts.locked&&this.fixed&&obj.fixed&&(overlay||(this.margin=D.height()>W.height()?$("html").css("margin-right").replace("px",""):!1),obj.locked=this.overlay.append(obj.wrap),obj.fixed=!1),opts.showEarly===!0&&this.beforeShow.apply(this,arguments)},beforeShow:function(opts,obj){var scrollV,scrollH;obj.locked&&(this.margin!==!1&&($("*").filter(function(){return"fixed"===$(this).css("position")&&!$(this).hasClass("fancybox-overlay")&&!$(this).hasClass("fancybox-wrap")}).addClass("fancybox-margin"),this.el.addClass("fancybox-margin")),scrollV=W.scrollTop(),scrollH=W.scrollLeft(),this.el.addClass("fancybox-lock"),W.scrollTop(scrollV).scrollLeft(scrollH)),this.open(opts)},onUpdate:function(){this.fixed||this.update()},afterClose:function(opts){this.overlay&&!F.coming&&this.overlay.fadeOut(opts.speedOut,$.proxy(this.close,this))}},F.helpers.title={defaults:{type:"float",position:"bottom"},beforeShow:function(opts){var title,target,current=F.current,text=current.title,type=opts.type;if($.isFunction(text)&&(text=text.call(current.element,current)),isString(text)&&""!==$.trim(text)){switch(title=$('<div class="fancybox-title fancybox-title-'+type+'-wrap">'+text+"</div>"),type){case"inside":target=F.skin;break;case"outside":target=F.wrap;break;case"over":target=F.inner;break;default:target=F.skin,title.appendTo("body"),IE&&title.width(title.width()),title.wrapInner('<span class="child"></span>'),F.current.margin[2]+=Math.abs(getScalar(title.css("margin-bottom")))}title["top"===opts.position?"prependTo":"appendTo"](target)}}},$.fn.fancybox=function(options){var index,that=$(this),selector=this.selector||"",run=function(e){var relType,relVal,what=$(this).blur(),idx=index;e.ctrlKey||e.altKey||e.shiftKey||e.metaKey||what.is(".fancybox-wrap")||(relType=options.groupAttr||"data-fancybox-group",relVal=what.attr(relType),relVal||(relType="rel",relVal=what.get(0)[relType]),relVal&&""!==relVal&&"nofollow"!==relVal&&(what=selector.length?$(selector):that,what=what.filter("["+relType+'="'+relVal+'"]'),idx=what.index(this)),options.index=idx,F.open(what,options)!==!1&&e.preventDefault())};return options=options||{},index=options.index||0,selector&&options.live!==!1?D.undelegate(selector,"click.fb-start").delegate(selector+":not('.fancybox-item, .fancybox-nav')","click.fb-start",run):that.unbind("click.fb-start").bind("click.fb-start",run),this.filter("[data-fancybox-start=1]").trigger("click"),this},D.ready(function(){var w1,w2;$.scrollbarWidth===undefined&&($.scrollbarWidth=function(){var parent=$('<div style="width:50px;height:50px;overflow:auto"><div/></div>').appendTo("body"),child=parent.children(),width=child.innerWidth()-child.height(99).innerWidth();return parent.remove(),width}),$.support.fixedPosition===undefined&&($.support.fixedPosition=function(){var elem=$('<div style="position:fixed;top:20px;"></div>').appendTo("body"),fixed=20===elem[0].offsetTop||15===elem[0].offsetTop;return elem.remove(),fixed}()),$.extend(F.defaults,{scrollbarWidth:$.scrollbarWidth(),fixed:$.support.fixedPosition,parent:$("body")}),w1=$(window).width(),H.addClass("fancybox-lock-test"),w2=$(window).width(),H.removeClass("fancybox-lock-test"),$("<style type='text/css'>.fancybox-margin{margin-right:"+(w2-w1)+"px;}</style>").appendTo("head")})}(window,document,jQuery),function(window){function noop(){}function defineBridget($){function addOptionMethod(PluginClass){PluginClass.prototype.option||(PluginClass.prototype.option=function(opts){$.isPlainObject(opts)&&(this.options=$.extend(!0,this.options,opts))})}function bridge(namespace,PluginClass){$.fn[namespace]=function(options){if("string"==typeof options){for(var args=slice.call(arguments,1),i=0,len=this.length;len>i;i++){var elem=this[i],instance=$.data(elem,namespace);if(instance)if($.isFunction(instance[options])&&"_"!==options.charAt(0)){var returnValue=instance[options].apply(instance,args);if(void 0!==returnValue)return returnValue}else logError("no such method '"+options+"' for "+namespace+" instance");else logError("cannot call methods on "+namespace+" prior to initialization; attempted to call '"+options+"'")}return this}return this.each(function(){var instance=$.data(this,namespace);instance?(instance.option(options),instance._init()):(instance=new PluginClass(this,options),$.data(this,namespace,instance))})}}if($){var logError="undefined"==typeof console?noop:function(){};return $.bridget=function(namespace,PluginClass){addOptionMethod(PluginClass),bridge(namespace,PluginClass)},$.bridget}}var slice=Array.prototype.slice;"function"==typeof define&&define.amd?define("jquery-bridget/jquery.bridget",["jquery"],defineBridget):defineBridget("object"==typeof exports?require("jquery"):window.jQuery)}(window),function(window){function getIEEvent(obj){var event=window.event;return event.target=event.target||event.srcElement||obj,event}var docElem=document.documentElement,bind=function(){};docElem.addEventListener?bind=function(obj,type,fn){obj.addEventListener(type,fn,!1)}:docElem.attachEvent&&(bind=function(obj,type,fn){obj[type+fn]=fn.handleEvent?function(){var event=getIEEvent(obj);fn.handleEvent.call(fn,event)}:function(){var event=getIEEvent(obj);fn.call(obj,event)},obj.attachEvent("on"+type,obj[type+fn])});var unbind=function(){};docElem.removeEventListener?unbind=function(obj,type,fn){obj.removeEventListener(type,fn,!1)}:docElem.detachEvent&&(unbind=function(obj,type,fn){obj.detachEvent("on"+type,obj[type+fn]);try{delete obj[type+fn]}catch(err){obj[type+fn]=void 0}});var eventie={bind:bind,unbind:unbind};"function"==typeof define&&define.amd?define("eventie/eventie",eventie):"object"==typeof exports?module.exports=eventie:window.eventie=eventie}(this),function(window){function docReady(fn){"function"==typeof fn&&(docReady.isReady?fn():queue.push(fn))}function onReady(event){var isIE8NotReady="readystatechange"===event.type&&"complete"!==document.readyState;docReady.isReady||isIE8NotReady||trigger()}function trigger(){docReady.isReady=!0;for(var i=0,len=queue.length;len>i;i++){var fn=queue[i];fn()}}function defineDocReady(eventie){return"complete"===document.readyState?trigger():(eventie.bind(document,"DOMContentLoaded",onReady),eventie.bind(document,"readystatechange",onReady),eventie.bind(window,"load",onReady)),docReady}var document=window.document,queue=[];docReady.isReady=!1,"function"==typeof define&&define.amd?define("doc-ready/doc-ready",["eventie/eventie"],defineDocReady):"object"==typeof exports?module.exports=defineDocReady(require("eventie")):window.docReady=defineDocReady(window.eventie)}(window),function(){function EventEmitter(){}function indexOfListener(listeners,listener){for(var i=listeners.length;i--;)if(listeners[i].listener===listener)return i;return-1}function alias(name){return function(){return this[name].apply(this,arguments)}}var proto=EventEmitter.prototype,exports=this,originalGlobalValue=exports.EventEmitter;proto.getListeners=function(evt){var response,key,events=this._getEvents();if(evt instanceof RegExp){response={};for(key in events)events.hasOwnProperty(key)&&evt.test(key)&&(response[key]=events[key])}else response=events[evt]||(events[evt]=[]);return response},proto.flattenListeners=function(listeners){var i,flatListeners=[];for(i=0;i<listeners.length;i+=1)flatListeners.push(listeners[i].listener);return flatListeners},proto.getListenersAsObject=function(evt){var response,listeners=this.getListeners(evt);return listeners instanceof Array&&(response={},response[evt]=listeners),response||listeners},proto.addListener=function(evt,listener){var key,listeners=this.getListenersAsObject(evt),listenerIsWrapped="object"==typeof listener;for(key in listeners)listeners.hasOwnProperty(key)&&-1===indexOfListener(listeners[key],listener)&&listeners[key].push(listenerIsWrapped?listener:{listener:listener,once:!1});return this},proto.on=alias("addListener"),proto.addOnceListener=function(evt,listener){return this.addListener(evt,{listener:listener,once:!0})},proto.once=alias("addOnceListener"),proto.defineEvent=function(evt){return this.getListeners(evt),this},proto.defineEvents=function(evts){for(var i=0;i<evts.length;i+=1)this.defineEvent(evts[i]);return this},proto.removeListener=function(evt,listener){var index,key,listeners=this.getListenersAsObject(evt);for(key in listeners)listeners.hasOwnProperty(key)&&(index=indexOfListener(listeners[key],listener),-1!==index&&listeners[key].splice(index,1));return this},proto.off=alias("removeListener"),proto.addListeners=function(evt,listeners){return this.manipulateListeners(!1,evt,listeners)},proto.removeListeners=function(evt,listeners){return this.manipulateListeners(!0,evt,listeners)},proto.manipulateListeners=function(remove,evt,listeners){var i,value,single=remove?this.removeListener:this.addListener,multiple=remove?this.removeListeners:this.addListeners;if("object"!=typeof evt||evt instanceof RegExp)for(i=listeners.length;i--;)single.call(this,evt,listeners[i]);else for(i in evt)evt.hasOwnProperty(i)&&(value=evt[i])&&("function"==typeof value?single.call(this,i,value):multiple.call(this,i,value));return this},proto.removeEvent=function(evt){var key,type=typeof evt,events=this._getEvents();if("string"===type)delete events[evt];else if(evt instanceof RegExp)for(key in events)events.hasOwnProperty(key)&&evt.test(key)&&delete events[key];else delete this._events;return this},proto.removeAllListeners=alias("removeEvent"),proto.emitEvent=function(evt,args){var listener,i,key,response,listeners=this.getListenersAsObject(evt);for(key in listeners)if(listeners.hasOwnProperty(key))for(i=listeners[key].length;i--;)listener=listeners[key][i],listener.once===!0&&this.removeListener(evt,listener.listener),response=listener.listener.apply(this,args||[]),response===this._getOnceReturnValue()&&this.removeListener(evt,listener.listener);return this},proto.trigger=alias("emitEvent"),proto.emit=function(evt){var args=Array.prototype.slice.call(arguments,1);return this.emitEvent(evt,args)},proto.setOnceReturnValue=function(value){return this._onceReturnValue=value,this},proto._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},proto._getEvents=function(){return this._events||(this._events={})},EventEmitter.noConflict=function(){return exports.EventEmitter=originalGlobalValue,EventEmitter},"function"==typeof define&&define.amd?define("eventEmitter/EventEmitter",[],function(){return EventEmitter}):"object"==typeof module&&module.exports?module.exports=EventEmitter:exports.EventEmitter=EventEmitter}.call(this),function(window){function getStyleProperty(propName){if(propName){if("string"==typeof docElemStyle[propName])return propName;propName=propName.charAt(0).toUpperCase()+propName.slice(1);for(var prefixed,i=0,len=prefixes.length;len>i;i++)if(prefixed=prefixes[i]+propName,"string"==typeof docElemStyle[prefixed])return prefixed}}var prefixes="Webkit Moz ms Ms O".split(" "),docElemStyle=document.documentElement.style;"function"==typeof define&&define.amd?define("get-style-property/get-style-property",[],function(){return getStyleProperty}):"object"==typeof exports?module.exports=getStyleProperty:window.getStyleProperty=getStyleProperty}(window),function(window){function getStyleSize(value){var num=parseFloat(value),isValid=-1===value.indexOf("%")&&!isNaN(num);return isValid&&num}function noop(){}function getZeroSize(){for(var size={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},i=0,len=measurements.length;len>i;i++){var measurement=measurements[i];size[measurement]=0}return size}function defineGetSize(getStyleProperty){function setup(){if(!isSetup){isSetup=!0;var getComputedStyle=window.getComputedStyle;if(getStyle=function(){var getStyleFn=getComputedStyle?function(elem){return getComputedStyle(elem,null)}:function(elem){return elem.currentStyle};return function(elem){var style=getStyleFn(elem);return style||logError("Style returned "+style+". Are you running this code in a hidden iframe on Firefox? See http://bit.ly/getsizebug1"),style}}(),boxSizingProp=getStyleProperty("boxSizing")){var div=document.createElement("div");div.style.width="200px",div.style.padding="1px 2px 3px 4px",div.style.borderStyle="solid",div.style.borderWidth="1px 2px 3px 4px",div.style[boxSizingProp]="border-box";var body=document.body||document.documentElement;body.appendChild(div);var style=getStyle(div);isBoxSizeOuter=200===getStyleSize(style.width),body.removeChild(div)}}}function getSize(elem){if(setup(),"string"==typeof elem&&(elem=document.querySelector(elem)),elem&&"object"==typeof elem&&elem.nodeType){var style=getStyle(elem);if("none"===style.display)return getZeroSize();var size={};size.width=elem.offsetWidth,size.height=elem.offsetHeight;for(var isBorderBox=size.isBorderBox=!(!boxSizingProp||!style[boxSizingProp]||"border-box"!==style[boxSizingProp]),i=0,len=measurements.length;len>i;i++){var measurement=measurements[i],value=style[measurement];value=mungeNonPixel(elem,value);var num=parseFloat(value);size[measurement]=isNaN(num)?0:num}var paddingWidth=size.paddingLeft+size.paddingRight,paddingHeight=size.paddingTop+size.paddingBottom,marginWidth=size.marginLeft+size.marginRight,marginHeight=size.marginTop+size.marginBottom,borderWidth=size.borderLeftWidth+size.borderRightWidth,borderHeight=size.borderTopWidth+size.borderBottomWidth,isBorderBoxSizeOuter=isBorderBox&&isBoxSizeOuter,styleWidth=getStyleSize(style.width);styleWidth!==!1&&(size.width=styleWidth+(isBorderBoxSizeOuter?0:paddingWidth+borderWidth));var styleHeight=getStyleSize(style.height);return styleHeight!==!1&&(size.height=styleHeight+(isBorderBoxSizeOuter?0:paddingHeight+borderHeight)),size.innerWidth=size.width-(paddingWidth+borderWidth),size.innerHeight=size.height-(paddingHeight+borderHeight),size.outerWidth=size.width+marginWidth,size.outerHeight=size.height+marginHeight,size}}function mungeNonPixel(elem,value){if(window.getComputedStyle||-1===value.indexOf("%"))return value;var style=elem.style,left=style.left,rs=elem.runtimeStyle,rsLeft=rs&&rs.left;return rsLeft&&(rs.left=elem.currentStyle.left),style.left=value,value=style.pixelLeft,style.left=left,rsLeft&&(rs.left=rsLeft),value}var getStyle,boxSizingProp,isBoxSizeOuter,isSetup=!1;return getSize}var logError="undefined"==typeof console?noop:function(){},measurements=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"];"function"==typeof define&&define.amd?define("get-size/get-size",["get-style-property/get-style-property"],defineGetSize):"object"==typeof exports?module.exports=defineGetSize(require("desandro-get-style-property")):window.getSize=defineGetSize(window.getStyleProperty)}(window),function(ElemProto){function match(elem,selector){return elem[matchesMethod](selector)}function checkParent(elem){if(!elem.parentNode){var fragment=document.createDocumentFragment();fragment.appendChild(elem)}}function query(elem,selector){checkParent(elem);for(var elems=elem.parentNode.querySelectorAll(selector),i=0,len=elems.length;len>i;i++)if(elems[i]===elem)return!0;return!1}function matchChild(elem,selector){return checkParent(elem),match(elem,selector)}var matchesSelector,matchesMethod=function(){if(ElemProto.matchesSelector)return"matchesSelector";for(var prefixes=["webkit","moz","ms","o"],i=0,len=prefixes.length;len>i;i++){var prefix=prefixes[i],method=prefix+"MatchesSelector";if(ElemProto[method])return method}}();if(matchesMethod){var div=document.createElement("div"),supportsOrphans=match(div,"div");matchesSelector=supportsOrphans?match:matchChild}else matchesSelector=query;"function"==typeof define&&define.amd?define("matches-selector/matches-selector",[],function(){return matchesSelector}):"object"==typeof exports?module.exports=matchesSelector:window.matchesSelector=matchesSelector}(Element.prototype),function(window){function extend(a,b){for(var prop in b)a[prop]=b[prop];return a}function isEmptyObj(obj){for(var prop in obj)return!1;return prop=null,!0}function toDash(str){return str.replace(/([A-Z])/g,function($1){return"-"+$1.toLowerCase()})}function outlayerItemDefinition(EventEmitter,getSize,getStyleProperty){function Item(element,layout){element&&(this.element=element,this.layout=layout,this.position={x:0,y:0},this._create())}var transitionProperty=getStyleProperty("transition"),transformProperty=getStyleProperty("transform"),supportsCSS3=transitionProperty&&transformProperty,is3d=!!getStyleProperty("perspective"),transitionEndEvent={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend",transition:"transitionend"}[transitionProperty],prefixableProperties=["transform","transition","transitionDuration","transitionProperty"],vendorProperties=function(){for(var cache={},i=0,len=prefixableProperties.length;len>i;i++){var prop=prefixableProperties[i],supportedProp=getStyleProperty(prop);supportedProp&&supportedProp!==prop&&(cache[prop]=supportedProp)}return cache}();extend(Item.prototype,EventEmitter.prototype),Item.prototype._create=function(){this._transn={ingProperties:{},clean:{},onEnd:{}},this.css({position:"absolute"})},Item.prototype.handleEvent=function(event){var method="on"+event.type;this[method]&&this[method](event)},Item.prototype.getSize=function(){this.size=getSize(this.element)},Item.prototype.css=function(style){var elemStyle=this.element.style;for(var prop in style){var supportedProp=vendorProperties[prop]||prop;elemStyle[supportedProp]=style[prop]}},Item.prototype.getPosition=function(){var style=getStyle(this.element),layoutOptions=this.layout.options,isOriginLeft=layoutOptions.isOriginLeft,isOriginTop=layoutOptions.isOriginTop,x=parseInt(style[isOriginLeft?"left":"right"],10),y=parseInt(style[isOriginTop?"top":"bottom"],10);x=isNaN(x)?0:x,y=isNaN(y)?0:y;var layoutSize=this.layout.size;x-=isOriginLeft?layoutSize.paddingLeft:layoutSize.paddingRight,y-=isOriginTop?layoutSize.paddingTop:layoutSize.paddingBottom,this.position.x=x,this.position.y=y},Item.prototype.layoutPosition=function(){var layoutSize=this.layout.size,layoutOptions=this.layout.options,style={};layoutOptions.isOriginLeft?(style.left=this.position.x+layoutSize.paddingLeft+"px",style.right=""):(style.right=this.position.x+layoutSize.paddingRight+"px",style.left=""),layoutOptions.isOriginTop?(style.top=this.position.y+layoutSize.paddingTop+"px",style.bottom=""):(style.bottom=this.position.y+layoutSize.paddingBottom+"px",style.top=""),this.css(style),this.emitEvent("layout",[this])};var translate=is3d?function(x,y){return"translate3d("+x+"px, "+y+"px, 0)"}:function(x,y){return"translate("+x+"px, "+y+"px)"};Item.prototype._transitionTo=function(x,y){this.getPosition();var curX=this.position.x,curY=this.position.y,compareX=parseInt(x,10),compareY=parseInt(y,10),didNotMove=compareX===this.position.x&&compareY===this.position.y;if(this.setPosition(x,y),didNotMove&&!this.isTransitioning)return void this.layoutPosition();var transX=x-curX,transY=y-curY,transitionStyle={},layoutOptions=this.layout.options;transX=layoutOptions.isOriginLeft?transX:-transX,transY=layoutOptions.isOriginTop?transY:-transY,transitionStyle.transform=translate(transX,transY),this.transition({to:transitionStyle,onTransitionEnd:{transform:this.layoutPosition},isCleaning:!0})},Item.prototype.goTo=function(x,y){this.setPosition(x,y),this.layoutPosition()},Item.prototype.moveTo=supportsCSS3?Item.prototype._transitionTo:Item.prototype.goTo,Item.prototype.setPosition=function(x,y){this.position.x=parseInt(x,10),this.position.y=parseInt(y,10)},Item.prototype._nonTransition=function(args){this.css(args.to),args.isCleaning&&this._removeStyles(args.to);for(var prop in args.onTransitionEnd)args.onTransitionEnd[prop].call(this)},Item.prototype._transition=function(args){if(!parseFloat(this.layout.options.transitionDuration))return void this._nonTransition(args);var _transition=this._transn;for(var prop in args.onTransitionEnd)_transition.onEnd[prop]=args.onTransitionEnd[prop];for(prop in args.to)_transition.ingProperties[prop]=!0,args.isCleaning&&(_transition.clean[prop]=!0);if(args.from){this.css(args.from);var h=this.element.offsetHeight;h=null}this.enableTransition(args.to),this.css(args.to),this.isTransitioning=!0};var itemTransitionProperties=transformProperty&&toDash(transformProperty)+",opacity";Item.prototype.enableTransition=function(){this.isTransitioning||(this.css({transitionProperty:itemTransitionProperties,transitionDuration:this.layout.options.transitionDuration}),this.element.addEventListener(transitionEndEvent,this,!1))},Item.prototype.transition=Item.prototype[transitionProperty?"_transition":"_nonTransition"],Item.prototype.onwebkitTransitionEnd=function(event){this.ontransitionend(event)},Item.prototype.onotransitionend=function(event){this.ontransitionend(event)};var dashedVendorProperties={"-webkit-transform":"transform","-moz-transform":"transform","-o-transform":"transform"};Item.prototype.ontransitionend=function(event){if(event.target===this.element){var _transition=this._transn,propertyName=dashedVendorProperties[event.propertyName]||event.propertyName;if(delete _transition.ingProperties[propertyName],isEmptyObj(_transition.ingProperties)&&this.disableTransition(),propertyName in _transition.clean&&(this.element.style[event.propertyName]="",delete _transition.clean[propertyName]),propertyName in _transition.onEnd){var onTransitionEnd=_transition.onEnd[propertyName];
onTransitionEnd.call(this),delete _transition.onEnd[propertyName]}this.emitEvent("transitionEnd",[this])}},Item.prototype.disableTransition=function(){this.removeTransitionStyles(),this.element.removeEventListener(transitionEndEvent,this,!1),this.isTransitioning=!1},Item.prototype._removeStyles=function(style){var cleanStyle={};for(var prop in style)cleanStyle[prop]="";this.css(cleanStyle)};var cleanTransitionStyle={transitionProperty:"",transitionDuration:""};return Item.prototype.removeTransitionStyles=function(){this.css(cleanTransitionStyle)},Item.prototype.removeElem=function(){this.element.parentNode.removeChild(this.element),this.emitEvent("remove",[this])},Item.prototype.remove=function(){if(!transitionProperty||!parseFloat(this.layout.options.transitionDuration))return void this.removeElem();var _this=this;this.on("transitionEnd",function(){return _this.removeElem(),!0}),this.hide()},Item.prototype.reveal=function(){delete this.isHidden,this.css({display:""});var options=this.layout.options;this.transition({from:options.hiddenStyle,to:options.visibleStyle,isCleaning:!0})},Item.prototype.hide=function(){this.isHidden=!0,this.css({display:""});var options=this.layout.options;this.transition({from:options.visibleStyle,to:options.hiddenStyle,isCleaning:!0,onTransitionEnd:{opacity:function(){this.isHidden&&this.css({display:"none"})}}})},Item.prototype.destroy=function(){this.css({position:"",left:"",right:"",top:"",bottom:"",transition:"",transform:""})},Item}var getComputedStyle=window.getComputedStyle,getStyle=getComputedStyle?function(elem){return getComputedStyle(elem,null)}:function(elem){return elem.currentStyle};"function"==typeof define&&define.amd?define("outlayer/item",["eventEmitter/EventEmitter","get-size/get-size","get-style-property/get-style-property"],outlayerItemDefinition):"object"==typeof exports?module.exports=outlayerItemDefinition(require("wolfy87-eventemitter"),require("get-size"),require("desandro-get-style-property")):(window.Outlayer={},window.Outlayer.Item=outlayerItemDefinition(window.EventEmitter,window.getSize,window.getStyleProperty))}(window),function(window){function extend(a,b){for(var prop in b)a[prop]=b[prop];return a}function isArray(obj){return"[object Array]"===objToString.call(obj)}function makeArray(obj){var ary=[];if(isArray(obj))ary=obj;else if(obj&&"number"==typeof obj.length)for(var i=0,len=obj.length;len>i;i++)ary.push(obj[i]);else ary.push(obj);return ary}function removeFrom(obj,ary){var index=indexOf(ary,obj);-1!==index&&ary.splice(index,1)}function toDashed(str){return str.replace(/(.)([A-Z])/g,function(match,$1,$2){return $1+"-"+$2}).toLowerCase()}function outlayerDefinition(eventie,docReady,EventEmitter,getSize,matchesSelector,Item){function Outlayer(element,options){if("string"==typeof element&&(element=document.querySelector(element)),element&&isElement(element)){this.element=element,this.options=extend({},this.constructor.defaults),this.option(options);var id=++GUID;this.element.outlayerGUID=id,instances[id]=this,this._create(),this.options.isInitLayout&&this.layout()}}var GUID=0,instances={};return Outlayer.namespace="outlayer",Outlayer.Item=Item,Outlayer.defaults={containerStyle:{position:"relative"},isInitLayout:!0,isOriginLeft:!0,isOriginTop:!0,isResizeBound:!0,isResizingContainer:!0,transitionDuration:"0.4s",hiddenStyle:{opacity:0,transform:"scale(0.001)"},visibleStyle:{opacity:1,transform:"scale(1)"}},extend(Outlayer.prototype,EventEmitter.prototype),Outlayer.prototype.option=function(opts){extend(this.options,opts)},Outlayer.prototype._create=function(){this.reloadItems(),this.stamps=[],this.stamp(this.options.stamp),extend(this.element.style,this.options.containerStyle),this.options.isResizeBound&&this.bindResize()},Outlayer.prototype.reloadItems=function(){this.items=this._itemize(this.element.children)},Outlayer.prototype._itemize=function(elems){for(var itemElems=this._filterFindItemElements(elems),Item=this.constructor.Item,items=[],i=0,len=itemElems.length;len>i;i++){var elem=itemElems[i],item=new Item(elem,this);items.push(item)}return items},Outlayer.prototype._filterFindItemElements=function(elems){elems=makeArray(elems);for(var itemSelector=this.options.itemSelector,itemElems=[],i=0,len=elems.length;len>i;i++){var elem=elems[i];if(isElement(elem))if(itemSelector){matchesSelector(elem,itemSelector)&&itemElems.push(elem);for(var childElems=elem.querySelectorAll(itemSelector),j=0,jLen=childElems.length;jLen>j;j++)itemElems.push(childElems[j])}else itemElems.push(elem)}return itemElems},Outlayer.prototype.getItemElements=function(){for(var elems=[],i=0,len=this.items.length;len>i;i++)elems.push(this.items[i].element);return elems},Outlayer.prototype.layout=function(){this._resetLayout(),this._manageStamps();var isInstant=void 0!==this.options.isLayoutInstant?this.options.isLayoutInstant:!this._isLayoutInited;this.layoutItems(this.items,isInstant),this._isLayoutInited=!0},Outlayer.prototype._init=Outlayer.prototype.layout,Outlayer.prototype._resetLayout=function(){this.getSize()},Outlayer.prototype.getSize=function(){this.size=getSize(this.element)},Outlayer.prototype._getMeasurement=function(measurement,size){var elem,option=this.options[measurement];option?("string"==typeof option?elem=this.element.querySelector(option):isElement(option)&&(elem=option),this[measurement]=elem?getSize(elem)[size]:option):this[measurement]=0},Outlayer.prototype.layoutItems=function(items,isInstant){items=this._getItemsForLayout(items),this._layoutItems(items,isInstant),this._postLayout()},Outlayer.prototype._getItemsForLayout=function(items){for(var layoutItems=[],i=0,len=items.length;len>i;i++){var item=items[i];item.isIgnored||layoutItems.push(item)}return layoutItems},Outlayer.prototype._layoutItems=function(items,isInstant){function onItemsLayout(){_this.emitEvent("layoutComplete",[_this,items])}var _this=this;if(!items||!items.length)return void onItemsLayout();this._itemsOn(items,"layout",onItemsLayout);for(var queue=[],i=0,len=items.length;len>i;i++){var item=items[i],position=this._getItemLayoutPosition(item);position.item=item,position.isInstant=isInstant||item.isLayoutInstant,queue.push(position)}this._processLayoutQueue(queue)},Outlayer.prototype._getItemLayoutPosition=function(){return{x:0,y:0}},Outlayer.prototype._processLayoutQueue=function(queue){for(var i=0,len=queue.length;len>i;i++){var obj=queue[i];this._positionItem(obj.item,obj.x,obj.y,obj.isInstant)}},Outlayer.prototype._positionItem=function(item,x,y,isInstant){isInstant?item.goTo(x,y):item.moveTo(x,y)},Outlayer.prototype._postLayout=function(){this.resizeContainer()},Outlayer.prototype.resizeContainer=function(){if(this.options.isResizingContainer){var size=this._getContainerSize();size&&(this._setContainerMeasure(size.width,!0),this._setContainerMeasure(size.height,!1))}},Outlayer.prototype._getContainerSize=noop,Outlayer.prototype._setContainerMeasure=function(measure,isWidth){if(void 0!==measure){var elemSize=this.size;elemSize.isBorderBox&&(measure+=isWidth?elemSize.paddingLeft+elemSize.paddingRight+elemSize.borderLeftWidth+elemSize.borderRightWidth:elemSize.paddingBottom+elemSize.paddingTop+elemSize.borderTopWidth+elemSize.borderBottomWidth),measure=Math.max(measure,0),this.element.style[isWidth?"width":"height"]=measure+"px"}},Outlayer.prototype._itemsOn=function(items,eventName,callback){function tick(){return doneCount++,doneCount===count&&callback.call(_this),!0}for(var doneCount=0,count=items.length,_this=this,i=0,len=items.length;len>i;i++){var item=items[i];item.on(eventName,tick)}},Outlayer.prototype.ignore=function(elem){var item=this.getItem(elem);item&&(item.isIgnored=!0)},Outlayer.prototype.unignore=function(elem){var item=this.getItem(elem);item&&delete item.isIgnored},Outlayer.prototype.stamp=function(elems){if(elems=this._find(elems)){this.stamps=this.stamps.concat(elems);for(var i=0,len=elems.length;len>i;i++){var elem=elems[i];this.ignore(elem)}}},Outlayer.prototype.unstamp=function(elems){if(elems=this._find(elems))for(var i=0,len=elems.length;len>i;i++){var elem=elems[i];removeFrom(elem,this.stamps),this.unignore(elem)}},Outlayer.prototype._find=function(elems){return elems?("string"==typeof elems&&(elems=this.element.querySelectorAll(elems)),elems=makeArray(elems)):void 0},Outlayer.prototype._manageStamps=function(){if(this.stamps&&this.stamps.length){this._getBoundingRect();for(var i=0,len=this.stamps.length;len>i;i++){var stamp=this.stamps[i];this._manageStamp(stamp)}}},Outlayer.prototype._getBoundingRect=function(){var boundingRect=this.element.getBoundingClientRect(),size=this.size;this._boundingRect={left:boundingRect.left+size.paddingLeft+size.borderLeftWidth,top:boundingRect.top+size.paddingTop+size.borderTopWidth,right:boundingRect.right-(size.paddingRight+size.borderRightWidth),bottom:boundingRect.bottom-(size.paddingBottom+size.borderBottomWidth)}},Outlayer.prototype._manageStamp=noop,Outlayer.prototype._getElementOffset=function(elem){var boundingRect=elem.getBoundingClientRect(),thisRect=this._boundingRect,size=getSize(elem),offset={left:boundingRect.left-thisRect.left-size.marginLeft,top:boundingRect.top-thisRect.top-size.marginTop,right:thisRect.right-boundingRect.right-size.marginRight,bottom:thisRect.bottom-boundingRect.bottom-size.marginBottom};return offset},Outlayer.prototype.handleEvent=function(event){var method="on"+event.type;this[method]&&this[method](event)},Outlayer.prototype.bindResize=function(){this.isResizeBound||(eventie.bind(window,"resize",this),this.isResizeBound=!0)},Outlayer.prototype.unbindResize=function(){this.isResizeBound&&eventie.unbind(window,"resize",this),this.isResizeBound=!1},Outlayer.prototype.onresize=function(){function delayed(){_this.resize(),delete _this.resizeTimeout}this.resizeTimeout&&clearTimeout(this.resizeTimeout);var _this=this;this.resizeTimeout=setTimeout(delayed,100)},Outlayer.prototype.resize=function(){this.isResizeBound&&this.needsResizeLayout()&&this.layout()},Outlayer.prototype.needsResizeLayout=function(){var size=getSize(this.element),hasSizes=this.size&&size;return hasSizes&&size.innerWidth!==this.size.innerWidth},Outlayer.prototype.addItems=function(elems){var items=this._itemize(elems);return items.length&&(this.items=this.items.concat(items)),items},Outlayer.prototype.appended=function(elems){var items=this.addItems(elems);items.length&&(this.layoutItems(items,!0),this.reveal(items))},Outlayer.prototype.prepended=function(elems){var items=this._itemize(elems);if(items.length){var previousItems=this.items.slice(0);this.items=items.concat(previousItems),this._resetLayout(),this._manageStamps(),this.layoutItems(items,!0),this.reveal(items),this.layoutItems(previousItems)}},Outlayer.prototype.reveal=function(items){var len=items&&items.length;if(len)for(var i=0;len>i;i++){var item=items[i];item.reveal()}},Outlayer.prototype.hide=function(items){var len=items&&items.length;if(len)for(var i=0;len>i;i++){var item=items[i];item.hide()}},Outlayer.prototype.getItem=function(elem){for(var i=0,len=this.items.length;len>i;i++){var item=this.items[i];if(item.element===elem)return item}},Outlayer.prototype.getItems=function(elems){if(elems&&elems.length){for(var items=[],i=0,len=elems.length;len>i;i++){var elem=elems[i],item=this.getItem(elem);item&&items.push(item)}return items}},Outlayer.prototype.remove=function(elems){elems=makeArray(elems);var removeItems=this.getItems(elems);if(removeItems&&removeItems.length){this._itemsOn(removeItems,"remove",function(){this.emitEvent("removeComplete",[this,removeItems])});for(var i=0,len=removeItems.length;len>i;i++){var item=removeItems[i];item.remove(),removeFrom(item,this.items)}}},Outlayer.prototype.destroy=function(){var style=this.element.style;style.height="",style.position="",style.width="";for(var i=0,len=this.items.length;len>i;i++){var item=this.items[i];item.destroy()}this.unbindResize();var id=this.element.outlayerGUID;delete instances[id],delete this.element.outlayerGUID,jQuery&&jQuery.removeData(this.element,this.constructor.namespace)},Outlayer.data=function(elem){var id=elem&&elem.outlayerGUID;return id&&instances[id]},Outlayer.create=function(namespace,options){function Layout(){Outlayer.apply(this,arguments)}return Object.create?Layout.prototype=Object.create(Outlayer.prototype):extend(Layout.prototype,Outlayer.prototype),Layout.prototype.constructor=Layout,Layout.defaults=extend({},Outlayer.defaults),extend(Layout.defaults,options),Layout.prototype.settings={},Layout.namespace=namespace,Layout.data=Outlayer.data,Layout.Item=function(){Item.apply(this,arguments)},Layout.Item.prototype=new Item,docReady(function(){for(var dashedNamespace=toDashed(namespace),elems=document.querySelectorAll(".js-"+dashedNamespace),dataAttr="data-"+dashedNamespace+"-options",i=0,len=elems.length;len>i;i++){var options,elem=elems[i],attr=elem.getAttribute(dataAttr);try{options=attr&&JSON.parse(attr)}catch(error){continue}var instance=new Layout(elem,options);jQuery&&jQuery.data(elem,namespace,instance)}}),jQuery&&jQuery.bridget&&jQuery.bridget(namespace,Layout),Layout},Outlayer.Item=Item,Outlayer}var document=window.document,jQuery=(window.console,window.jQuery),noop=function(){},objToString=Object.prototype.toString,isElement="function"==typeof HTMLElement||"object"==typeof HTMLElement?function(obj){return obj instanceof HTMLElement}:function(obj){return obj&&"object"==typeof obj&&1===obj.nodeType&&"string"==typeof obj.nodeName},indexOf=Array.prototype.indexOf?function(ary,obj){return ary.indexOf(obj)}:function(ary,obj){for(var i=0,len=ary.length;len>i;i++)if(ary[i]===obj)return i;return-1};"function"==typeof define&&define.amd?define("outlayer/outlayer",["eventie/eventie","doc-ready/doc-ready","eventEmitter/EventEmitter","get-size/get-size","matches-selector/matches-selector","./item"],outlayerDefinition):"object"==typeof exports?module.exports=outlayerDefinition(require("eventie"),require("doc-ready"),require("wolfy87-eventemitter"),require("get-size"),require("desandro-matches-selector"),require("./item")):window.Outlayer=outlayerDefinition(window.eventie,window.docReady,window.EventEmitter,window.getSize,window.matchesSelector,window.Outlayer.Item)}(window),function(window){function masonryDefinition(Outlayer,getSize){var Masonry=Outlayer.create("masonry");return Masonry.prototype._resetLayout=function(){this.getSize(),this._getMeasurement("columnWidth","outerWidth"),this._getMeasurement("gutter","outerWidth"),this.measureColumns();var i=this.cols;for(this.colYs=[];i--;)this.colYs.push(0);this.maxY=0},Masonry.prototype.measureColumns=function(){if(this.getContainerWidth(),!this.columnWidth){var firstItem=this.items[0],firstItemElem=firstItem&&firstItem.element;this.columnWidth=firstItemElem&&getSize(firstItemElem).outerWidth||this.containerWidth}this.columnWidth+=this.gutter,this.cols=Math.floor((this.containerWidth+this.gutter)/this.columnWidth),this.cols=Math.max(this.cols,1)},Masonry.prototype.getContainerWidth=function(){var container=this.options.isFitWidth?this.element.parentNode:this.element,size=getSize(container);this.containerWidth=size&&size.innerWidth},Masonry.prototype._getItemLayoutPosition=function(item){item.getSize();var remainder=item.size.outerWidth%this.columnWidth,mathMethod=remainder&&1>remainder?"round":"ceil",colSpan=Math[mathMethod](item.size.outerWidth/this.columnWidth);colSpan=Math.min(colSpan,this.cols);for(var colGroup=this._getColGroup(colSpan),minimumY=Math.min.apply(Math,colGroup),shortColIndex=indexOf(colGroup,minimumY),position={x:this.columnWidth*shortColIndex,y:minimumY},setHeight=minimumY+item.size.outerHeight,setSpan=this.cols+1-colGroup.length,i=0;setSpan>i;i++)this.colYs[shortColIndex+i]=setHeight;return position},Masonry.prototype._getColGroup=function(colSpan){if(2>colSpan)return this.colYs;for(var colGroup=[],groupCount=this.cols+1-colSpan,i=0;groupCount>i;i++){var groupColYs=this.colYs.slice(i,i+colSpan);colGroup[i]=Math.max.apply(Math,groupColYs)}return colGroup},Masonry.prototype._manageStamp=function(stamp){var stampSize=getSize(stamp),offset=this._getElementOffset(stamp),firstX=this.options.isOriginLeft?offset.left:offset.right,lastX=firstX+stampSize.outerWidth,firstCol=Math.floor(firstX/this.columnWidth);firstCol=Math.max(0,firstCol);var lastCol=Math.floor(lastX/this.columnWidth);lastCol-=lastX%this.columnWidth?0:1,lastCol=Math.min(this.cols-1,lastCol);for(var stampMaxY=(this.options.isOriginTop?offset.top:offset.bottom)+stampSize.outerHeight,i=firstCol;lastCol>=i;i++)this.colYs[i]=Math.max(stampMaxY,this.colYs[i])},Masonry.prototype._getContainerSize=function(){this.maxY=Math.max.apply(Math,this.colYs);var size={height:this.maxY};return this.options.isFitWidth&&(size.width=this._getContainerFitWidth()),size},Masonry.prototype._getContainerFitWidth=function(){for(var unusedCols=0,i=this.cols;--i&&0===this.colYs[i];)unusedCols++;return(this.cols-unusedCols)*this.columnWidth-this.gutter},Masonry.prototype.needsResizeLayout=function(){var previousWidth=this.containerWidth;return this.getContainerWidth(),previousWidth!==this.containerWidth},Masonry}var indexOf=Array.prototype.indexOf?function(items,value){return items.indexOf(value)}:function(items,value){for(var i=0,len=items.length;len>i;i++){var item=items[i];if(item===value)return i}return-1};"function"==typeof define&&define.amd?define(["outlayer/outlayer","get-size/get-size"],masonryDefinition):"object"==typeof exports?module.exports=masonryDefinition(require("outlayer"),require("get-size")):window.Masonry=masonryDefinition(window.Outlayer,window.getSize)}(window),eval(function(p,a,c,k,e,r){if(e=function(c){return(a>c?"":e(parseInt(c/a)))+((c%=a)>35?String.fromCharCode(c+29):c.toString(36))},!"".replace(/^/,String)){for(;c--;)r[e(c)]=k[c]||e(c);k=[function(e){return r[e]}],e=function(){return"\\w+"},c=1}for(;c--;)k[c]&&(p=p.replace(new RegExp("\\b"+e(c)+"\\b","g"),k[c]));return p}("7(z.1E&&!z.1C){(3($){3 8(a){2.4=a;7(a.s('9')=='D'){2.T()}$(a[0].G).M(3(){7(a.Q('6')&&a[0].x==a.s('6')){a[0].x=''}})}8.1B={w:3(a){7(2.4[0].x===''||(a&&2.P())){7(2.K){Z{2.4[0].10('9','A')}15(e){2.4.1z(2.S.w()).C()}}2.4.W('6');2.4[0].x=2.4.s('6')}},C:3(){7(2.P()&&2.4.Q('6')){2.4.X('6');2.4[0].x='';7(2.K){Z{2.4[0].10('9','D')}15(e){}2.4.w();2.4[0].u()}}},P:3(){t 2.4[0].x==2.4.s('6')},T:3(){5 a=2.4;a.s('1v','D');2.K=B;7($.12.13&&a[0].14){5 b=$(a[0].14.1s(/9=(['\"])?D\\1/1r,'9=$1q$1'));2.S=b.E(a.s('6')).W('6').u(3(){a.F('u');$(2).C()});$(a[0].G).M(3(){b.17();a.w()})}}};5 d=!!(\"6\"U z.V(\"4\"));$.1n.6=3(){t d?2:2.Y(3(){5 b=$(2);5 c=1m 8(b);c.w(B);b.u(3(){c.C()});b.J(3(){c.w(1l)});7($.12.13){$(1k).1i(3(){7(b.E()){b.X(\"6\")}c.w(B)});b.u(3(){7(2.x==\"\"){5 a=2.1h();a.1g(B);a.1f('1d',0);a.19()}})}})}})(16)}1p{(3(a){a.8={v:{r:\"18(N,N,N)\",y:\"1a-1b-r\"},1c:3(f){7(f){a.1e(a.8.v,f)}5 e=3(o){t a(o).E()};5 c=3(o,p){a(o).E(p)};5 i=3(o){t a(o).s(\"6\")};5 l=3(o){5 p=e(o);t(p.1j===0)||p==i(o)};5 k=3(o){a(o).L(a.8.v.y,a(o).H(\"r\"));a(o).H(\"r\",a.8.v.r)};5 n=3(o){a(o).H(\"r\",a(o).L(a.8.v.y));a(o).1o(a.8.v.y)};5 j=3(o){c(o,i(o));k(o)};5 h=3(o){7(a(o).L(a.8.v.y)){c(o,\"\");n(o)}};5 g=3(){7(l(2)){h(2)}};5 d=3(){7(l(2)){j(2)}};5 m=3(){7(l(2)){h(2)}};a(\"1t\").1u('<11 9=\"A/H\" 1w=\"1x\">[6]:u::-1y-4-6 { r:R; }[6]:u:-1A-6 { r: R; }</11>');5 b=3(o,p){5 q=z.V(o);t(p U q)};7(!b(\"I\",\"6\")){a(\"I, 4[9='A']\").Y(3(o,p){7(a(p).s(\"6\")){a(p).u(g);a(p).J(d);a(p).1D(\"O\",m);a(p).F(\"J\");a(p).1F(\"G\").M(3(){a(p).F(\"O\")})}})}t 2},1G:3(b){7(!b){b=a(\"G\")}a(b).1H(\"I, 4[9='A']\").F(\"O\");t b}}})(16)}",62,106,"||this|function|input|var|placeholder|if|Placeholder|type||||||||||||||||||color|attr|return|focus|settings|show|value|dataName|document|text|true|hide|password|val|trigger|form|css|textarea|blur|isPassword|data|submit|169|parentformsubmitted|valueIsPlaceholder|hasClass|transparent|fakePassword|handlePassword|in|createElement|addClass|removeClass|each|try|setAttribute|style|browser|msie|outerHTML|catch|jQuery|remove|rgb|select|original|font|init|character|extend|moveStart|collapse|createTextRange|load|length|window|false|new|fn|removeData|else|1text|gi|replace|head|append|realType|media|screen|webkit|before|moz|prototype|querySelector|bind|all|parents|cleanBeforeSubmit|find".split("|"),0,{})),document.all&&!document.querySelector?$(function(){$("input[placeholder], textarea[placeholder], text[placeholder]").placeholder()}):$(document).ready(function(){$.Placeholder.init({color:"#646464"})}),function($){"use strict";$.fn.selectOrDie=function(method){var $_sodFilterTimeout,$_sodViewportTimeout,$defaults={customID:null,customClass:"",placeholder:null,placeholderOption:!1,prefix:null,cycle:!1,stripEmpty:!1,links:!1,linksExternal:!1,size:0,tabIndex:0,onChange:$.noop},$_settings={},$_sodKeysWhenClosed=!1,_private={initSoD:function(options){return $_settings=$.extend({},$defaults,options),this.each(function(){if(!$(this).parent().hasClass("sod_select")){var $sod,$sodListWrapper,$sodList,$select=$(this),$settingsId=$select.data("custom-id")?$select.data("custom-id"):$_settings.customID,$settingsClass=$select.data("custom-class")?$select.data("custom-class"):$_settings.customClass,$settingsPrefix=$select.data("prefix")?$select.data("prefix"):$_settings.prefix,$settingsPlaceholder=$select.data("placeholder")?$select.data("placeholder"):$_settings.placeholder,$settingsPlaceholderOption=$select.data("placeholder-option")?$select.data("placeholder-option"):$_settings.placeholderOption,$settingsCycle=$select.data("cycle")?$select.data("cycle"):$_settings.cycle,$settingsLinks=$select.data("links")?$select.data("links"):$_settings.links,$settingsLinksExternal=$select.data("links-external")?$select.data("links-external"):$_settings.linksExternal,$settingsSize=parseInt($select.data("size"))?$select.data("size"):$_settings.size,$settingsTabIndex=parseInt($select.data("tabindex"))?$select.data("tabindex"):$_settings.tabIndex?$_settings.tabIndex:$select.attr("tabindex")?$select.attr("tabindex"):$_settings.tabIndex,$settingsStripEmpty=$select.data("strip-empty")?$select.data("strip-empty"):$_settings.stripEmpty,$selectTitle=$select.prop("title")?$select.prop("title"):null,$selectDisabled=$select.is(":disabled")?" disabled":"",$sodPrefix="",$sodHtml="",$sodHeight=0;$settingsPrefix&&($sodPrefix='<span class="sod_prefix">'+$settingsPrefix+"</span> "),$sodHtml+=$settingsPlaceholder&&!$settingsPrefix?'<span class="sod_label sod_placeholder">'+$settingsPlaceholder+"</span>":'<span class="sod_label">'+$sodPrefix+"</span>",$sod=$("<span/>",{id:$settingsId,"class":"sod_select "+$settingsClass+$selectDisabled,title:$selectTitle,tabindex:$settingsTabIndex,html:$sodHtml,"data-cycle":$settingsCycle,"data-links":$settingsLinks,"data-links-external":$settingsLinksExternal,"data-placeholder":$settingsPlaceholder,"data-placeholder-option":$settingsPlaceholderOption,"data-prefix":$settingsPrefix,"data-filter":""}).insertAfter(this),_private.isTouch()&&$sod.addClass("touch"),$sodListWrapper=$("<span/>",{"class":"sod_list_wrapper"}).appendTo($sod),$sodList=$("<span/>",{"class":"sod_list"}).appendTo($sodListWrapper),$("option, optgroup",$select).each(function(i){var $this=$(this);$settingsStripEmpty&&!$.trim($this.text())?$this.remove():0===i&&$settingsPlaceholderOption&&!$sodPrefix?_private.populateSoD($this,$sodList,$sod,!0):_private.populateSoD($this,$sodList,$sod,!1)}),$settingsSize&&($sodListWrapper.show(),$(".sod_option:lt("+$settingsSize+")",$sodList).each(function(){$sodHeight+=$(this).outerHeight()}),$sodListWrapper.removeAttr("style"),$sodList.css({"max-height":$sodHeight})),$select.appendTo($sod),$sod.on("focusin",_private.focusSod).on("click",_private.triggerSod).on("click",".sod_option",_private.optionClick).on("mousemove",".sod_option",_private.optionHover).on("keydown",_private.keyboardUse),$select.on("change",_private.selectChange),$(document).on("click","label[for='"+$select.attr("id")+"']",function(e){e.preventDefault(),$sod.focus()})}})},populateSoD:function($option,$sodList,$sod,$isPlaceholder){var $sodPlaceholder=$sod.data("placeholder"),$sodPlaceholderOption=$sod.data("placeholder-option"),$sodPrefix=$sod.data("prefix"),$sodLabel=$sod.find(".sod_label"),$optionParent=$option.parent(),$optionText=$option.text(),$optionValue=$option.val(),$optionCustomId=$option.data("custom-id")?$option.data("custom-id"):null,$optionCustomClass=$option.data("custom-class")?$option.data("custom-class"):"",$optionIsDisabled=$option.is(":disabled")?" disabled ":"",$optionIsSelected=$option.is(":selected")?" selected active ":"",$optionLink=$option.data("link")?" link ":"",$optionLinkExternal=$option.data("link-external")?" linkexternal":"",$optgroupLabel=$option.prop("label");$option.is("option")?($("<span/>",{"class":"sod_option "+$optionCustomClass+$optionIsDisabled+$optionIsSelected+$optionLink+$optionLinkExternal,id:$optionCustomId,title:$optionText,html:$optionText,"data-value":$optionValue}).appendTo($sodList),$isPlaceholder&&!$sodPrefix?($sod.data("label",$optionText),$sod.data("placeholder",$optionText),$option.prop("disabled",!0),$sodList.find(".sod_option:last").addClass("is-placeholder disabled"),$optionIsSelected&&$sodLabel.addClass("sod_placeholder")):$optionIsSelected&&$sodPlaceholder&&!$sodPlaceholderOption&&!$sodPrefix?$sod.data("label",$sodPlaceholder):$optionIsSelected&&$sod.data("label",$optionText),($optionIsSelected&&!$sodPlaceholder||$optionIsSelected&&$sodPlaceholderOption||$optionIsSelected&&$sodPrefix)&&$sodLabel.append($optionText),$optionParent.is("optgroup")&&($sodList.find(".sod_option:last").addClass("groupchild"),$optionParent.is(":disabled")&&$sodList.find(".sod_option:last").addClass("disabled"))):$("<span/>",{"class":"sod_option optgroup "+$optionIsDisabled,title:$optgroupLabel,html:$optgroupLabel,"data-label":$optgroupLabel}).appendTo($sodList)},focusSod:function(){var $sod=$(this);$sod.hasClass("disabled")?_private.blurSod($sod):(_private.blurSod($(".sod_select.focus").not($sod)),$sod.addClass("focus"),$("html").on("click.sodBlur",function(){_private.blurSod($sod)}))},triggerSod:function(e){e.stopPropagation();var $sod=$(this),$sodList=$sod.find(".sod_list"),$sodPlaceholder=$sod.data("placeholder"),$optionActive=$sod.find(".active"),$optionSelected=$sod.find(".selected");$sod.hasClass("disabled")||$sod.hasClass("open")||$sod.hasClass("touch")?(clearTimeout($_sodViewportTimeout),$sod.removeClass("open"),$sodPlaceholder&&($sod.find(".sod_label").get(0).lastChild.nodeValue=$optionActive.text())):($sod.addClass("open"),$sodPlaceholder&&!$sod.data("prefix")&&$sod.find(".sod_label").addClass("sod_placeholder").html($sodPlaceholder),_private.listScroll($sodList,$optionSelected),_private.checkViewport($sod,$sodList))},keyboardUse:function(e){var $sodFilterHit,$optionNext,$optionCycle,$sod=$(this),$sodList=$sod.find(".sod_list"),$sodOptions=$sod.find(".sod_option"),$sodLabel=$sod.find(".sod_label"),$sodCycle=$sod.data("cycle"),$optionActive=$sodOptions.filter(".active");return e.which>36&&e.which<41?(37===e.which||38===e.which?($optionNext=$optionActive.prevAll(":not('.disabled, .optgroup')").first(),$optionCycle=$sodOptions.not(".disabled, .optgroup").last()):(39===e.which||40===e.which)&&($optionNext=$optionActive.nextAll(":not('.disabled, .optgroup')").first(),$optionCycle=$sodOptions.not(".disabled, .optgroup").first()),!$optionNext.hasClass("sod_option")&&$sodCycle&&($optionNext=$optionCycle),($optionNext.hasClass("sod_option")||$sodCycle)&&($optionActive.removeClass("active"),$optionNext.addClass("active"),$sodLabel.get(0).lastChild.nodeValue=$optionNext.text(),_private.listScroll($sodList,$optionNext),$sod.hasClass("open")||($_sodKeysWhenClosed=!0)),!1):(13===e.which||32===e.which&&$sod.hasClass("open")&&(" "===$sod.data("filter")[0]||""===$sod.data("filter"))?(e.preventDefault(),$optionActive.click()):32!==e.which||$sod.hasClass("open")||" "!==$sod.data("filter")[0]&&""!==$sod.data("filter")?27===e.which&&_private.blurSod($sod):(e.preventDefault(),$_sodKeysWhenClosed=!1,$sod.click()),void(0!==e.which&&(clearTimeout($_sodFilterTimeout),$sod.data("filter",$sod.data("filter")+String.fromCharCode(e.which)),$sodFilterHit=$sodOptions.filter(function(){return 0===$(this).text().toLowerCase().indexOf($sod.data("filter").toLowerCase())}).not(".disabled, .optgroup").first(),$sodFilterHit.length&&($optionActive.removeClass("active"),$sodFilterHit.addClass("active"),_private.listScroll($sodList,$sodFilterHit),$sodLabel.get(0).lastChild.nodeValue=$sodFilterHit.text(),$sod.hasClass("open")||($_sodKeysWhenClosed=!0)),$_sodFilterTimeout=setTimeout(function(){$sod.data("filter","")},500))))},optionHover:function(){var $option=$(this);$option.hasClass("disabled")||$option.hasClass("optgroup")||$option.siblings().removeClass("active").end().addClass("active")},optionClick:function(e){e.stopPropagation();var $clicked=$(this),$sod=$clicked.closest(".sod_select"),$optionDisabled=$clicked.hasClass("disabled"),$optionOptgroup=$clicked.hasClass("optgroup"),$optionIndex=$sod.find(".sod_option:not('.optgroup')").index(this);$sod.hasClass("touch")||($optionDisabled||$optionOptgroup||($sod.find(".selected, .sod_placeholder").removeClass("selected sod_placeholder"),$clicked.addClass("selected"),$sod.find("select option")[$optionIndex].selected=!0,$sod.find("select").change()),clearTimeout($_sodViewportTimeout),$sod.removeClass("open"))},selectChange:function(){var $select=$(this),$optionSelected=$select.find(":selected"),$optionText=$optionSelected.text(),$sod=$select.closest(".sod_select");$sod.find(".sod_label").get(0).lastChild.nodeValue=$optionText,$sod.data("label",$optionText),$_settings.onChange.call(this),!$sod.data("links")&&!$optionSelected.data("link")||$optionSelected.data("link-external")?($sod.data("links-external")||$optionSelected.data("link-external"))&&window.open($optionSelected.val(),"_blank"):window.location.href=$optionSelected.val()},blurSod:function($sod){if($("body").find($sod).length){var $sodLabel=$sod.data("label"),$sodPlaceholder=$sod.data("placeholder"),$optionActive=$sod.find(".active"),$optionSelected=$sod.find(".selected"),$optionHasChanged=!1;clearTimeout($_sodViewportTimeout),$_sodKeysWhenClosed&&!$optionActive.hasClass("selected")?($optionActive.click(),$optionHasChanged=!0):$optionActive.hasClass("selected")||($optionActive.removeClass("active"),$optionSelected.addClass("active")),!$optionHasChanged&&$sodPlaceholder?$sod.find(".sod_label").get(0).lastChild.nodeValue=$optionSelected.text():$optionHasChanged||($sod.find(".sod_label").get(0).lastChild.nodeValue=$sodLabel),$_sodKeysWhenClosed=!1,$sod.removeClass("open focus"),$sod.blur(),$("html").off(".sodBlur")}},checkViewport:function($sod,$sodList){var $sodPosition=$sod[0].getBoundingClientRect(),$sodListHeight=$sodList.outerHeight();$sodPosition.bottom+$sodListHeight+10>$(window).height()&&$sodPosition.top-$sodListHeight>10?$sod.addClass("above"):$sod.removeClass("above"),$_sodViewportTimeout=setTimeout(function(){_private.checkViewport($sod,$sodList)},200)},listScroll:function($sodList,$option){var $scrollList=$sodList[0].getBoundingClientRect(),$scrollOption=$option[0].getBoundingClientRect();$scrollList.top>$scrollOption.top?$sodList.scrollTop($sodList.scrollTop()-$scrollList.top+$scrollOption.top):$scrollList.bottom<$scrollOption.bottom&&$sodList.scrollTop($sodList.scrollTop()-$scrollList.bottom+$scrollOption.bottom)},isTouch:function(){return"ontouchstart"in window||navigator.MaxTouchPoints>0||navigator.msMaxTouchPoints>0}},methods={destroy:function(){return this.each(function(){var $select=$(this),$sod=$select.parent();$sod.hasClass("sod_select")&&($select.off("change"),$sod.find("span").remove(),$select.unwrap())})},update:function(){return this.each(function(){var $select=$(this),$sod=$select.parent(),$sodList=$sod.find(".sod_list:first");$sod.hasClass("sod_select")&&($sodList.empty(),$sod.find(".sod_label").get(0).lastChild.nodeValue="",$select.is(":disabled")&&$sod.addClass("disabled"),$("option, optgroup",$select).each(function(){_private.populateSoD($(this),$sodList,$sod)}))})},disable:function($value){return this.each(function(){var $select=$(this),$sod=$select.parent();
$sod.hasClass("sod_select")&&("undefined"!=typeof $value?($sod.find(".sod_list:first .sod_option[data-value='"+$value+"']").addClass("disabled"),$sod.find(".sod_list:first .sod_option[data-label='"+$value+"']").nextUntil(":not(.groupchild)").addClass("disabled"),$("option[value='"+$value+"'], optgroup[label='"+$value+"']",this).prop("disabled",!0)):$sod.hasClass("sod_select")&&($sod.addClass("disabled"),$select.prop("disabled",!0)))})},enable:function($value){return this.each(function(){var $select=$(this),$sod=$select.parent();$sod.hasClass("sod_select")&&("undefined"!=typeof $value?($sod.find(".sod_list:first .sod_option[data-value='"+$value+"']").removeClass("disabled"),$sod.find(".sod_list:first .sod_option[data-label='"+$value+"']").nextUntil(":not(.groupchild)").removeClass("disabled"),$("option[value='"+$value+"'], optgroup[label='"+$value+"']",this).prop("disabled",!1)):$sod.hasClass("sod_select")&&($sod.removeClass("disabled"),$select.prop("disabled",!1)))})}};return methods[method]?methods[method].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof method&&method?void $.error('Select or Die: Oh no! No such method "'+method+'" for the SoD instance'):_private.initSoD.apply(this,arguments)}}(jQuery),$(function(){$(".bigMap__citiesItem").each(function(){var x=$(this).data("x"),y=$(this).data("y");$(this).find("a").css({left:x+"px",top:y+"px"}),$(this).mouseenter(function(){$(this).find("a").css({left:x-4+"px",top:y-11+"px"})}).mouseleave(function(){$(this).find("a").css({left:x+"px",top:y+"px"})})})}),$(function(){$(".bigMapEditable__map").on("click",function(e){var x=y=0;x=void 0==e.offsetX?e.layerX:e.offsetX,y=void 0==e.offsetY?e.layerY:e.offsetY,$(".bigMapEditable__form").removeClass("_hidden"),$(".bigMapEditable__formX").val(x-40),$(".bigMapEditable__formY").val(y-35)}),$(".bigMapEditable__form").submit(function(event){event.preventDefault(),$.ajax({type:"POST",url:"",data:$(".bigMapEditable__form").serialize()}).success(function(){})})}),$(function(){var $jcarousel=$(".carousel__wrapper"),initialItemsCount=0,itemsCount=0,leftOffset=0,itemsHtml="",clientWidth=document.body.clientWidth;$jcarousel.length&&($jcarousel.jcarousel({wrap:"circular"}),$(window).resize(function(){clientWidth=document.body.clientWidth}),itemsHtml+=$(".carousel__list").html(),itemsCount=$jcarousel.find("li").length,initialItemsCount=itemsCount,leftOffset=-189*initialItemsCount,$(".carousel__control._prev").on("click",function(event){event.preventDefault()}),$(".carousel__control._next").on("click",function(event){event.preventDefault()}),$(".carousel__control._prev").on("mouseenter",function(){this.iid=setInterval(function(){var left=parseInt($(".carousel__list").css("left"));0==left?($(".carousel__list").prepend($(itemsHtml)),$(".carousel__list").css("left",leftOffset+"px"),itemsCount=$jcarousel.find("li").length):(left+=2,$(".carousel__list").css("left",left+"px"))},10)}).on("mouseleave",function(){this.iid&&clearInterval(this.iid)}),$(".carousel__control._next").on("mouseenter",function(){this.iid=setInterval(function(){var left=parseInt($(".carousel__list").css("left"));-1*(189*itemsCount-clientWidth)>=left&&($(".carousel__list").append($(itemsHtml)),itemsCount=$jcarousel.find("li").length),left-=2,$(".carousel__list").css("left",left+"px")},10)}).on("mouseleave",function(){this.iid&&clearInterval(this.iid)}))}),$(function(){var $container=$(".catTile__list"),columnWidth=$container.data("column-width");columnWidth||(columnWidth=".catTile__listItem"),setTimeout(function(){$container.length&&$container.masonry({columnWidth:columnWidth,itemSelector:".catTile__listItem",gutter:0})},50)}),$(function(){$(".catToolbar__citiesActive").length&&$(".catToolbar__citiesActive").on("click",function(){$(this).next().addClass("_active")}),$(".catToolbar__citiesListItemLink").on("click",function(){$(".catToolbar__citiesActive").text($(this).text())}),$(".catToolbar__sortActive").length&&$(".catToolbar__sortActive").on("click",function(){$(this).next().addClass("_active")}),$(".catToolbar__sortListItemLink").on("click",function(){$(".catToolbar__sortActive").text($(this).text())}),$("html").on("click",function(event){return $(event.target).closest(".catToolbar__citiesActive").length?($(".catToolbar__sortList").removeClass("_active"),!1):$(event.target).closest(".catToolbar__sortActive").length?($(".catToolbar__citiesList").removeClass("_active"),!1):($(".catToolbar__citiesList").removeClass("_active"),void $(".catToolbar__sortList").removeClass("_active"))})}),$(function(){$(".categorySelect__selectActive").length&&$(".categorySelect__selectActive").on("click",function(){$(this).is("a")&&(window.location.href=$(this).prop("href"));var $select=$(this).closest(".categorySelect__select");$select.hasClass("_active")?$select.removeClass("_active"):$select.addClass("_active")}),$("html").on("click",function(event){$(".categorySelect__select").each(function(){return $(event.target).closest(".categorySelect__select").is($(this))?void($(event.target).is(".categorySelect__selectListItemLink")&&(window.location.href=$(this).prop("href"))):void $(this).removeClass("_active")})})}),$(function(){function init(){contactsMap=new ymaps.Map("contactmap",{center:[55.013039,82.943301],behaviors:["default","scrollZoom"],zoom:15}),contactsMap.behaviors.disable("scrollZoom"),contactsMap.controls.add("zoomControl",{left:5,top:5}).add("typeSelector").add("mapTools",{left:35,top:5}),myPlacemark0=new ymaps.Placemark([55.0128,82.9434],{balloonContent:$contactMap.data("text")},{iconImageHref:"/bitrix/templates/.default/static/img/assets/contactMap/map_pin.png",iconImageSize:[90,72],iconImageOffset:[0,-40],balloonShadow:!1}),contactsMap.geoObjects.add(myPlacemark0)}var $contactMap=$("#contactmap");if($contactMap.length){ymaps.ready(init);var contactsMap}}),$(function(){$("._js_fancybox").each(function(){$(this).fancybox({helpers:{overlay:{locked:!1}}})})}),$(function(){$("._js-custom-select_feedback").selectOrDie({customClass:"feedback__formSelect",placeholder:"требуемый вид работ"})}),$(function(){var $pageWrapper=$(".page__wrapper"),$page=$(".page");$(".header__emailLink").fancybox({wrapCSS:"popup",beforeLoad:function(){$pageWrapper.addClass("_blured")},afterLoad:function(){$page.addClass("_static")},beforeClose:function(){$pageWrapper.removeClass("_blured"),$page.removeClass("_static")},helpers:{overlay:{locked:!1}}}),$("img").on("contextmenu",function(event){event.preventDefault()})}),$(function(){var $mainSlider=$(".mainSlider__slider");$mainSlider.length&&$mainSlider.bxSlider({mode:"fade",auto:!0,pause:1e4,autoHover:!0,adaptiveHeight:!0,infiniteLoop:!0,captions:!0,onSliderLoad:function(currentIndex){function setWidth(){var resultWidth,windowWidth=$(window).width();return 1e3>windowWidth?($(".mainSlider").find(".bx-next").css({width:"90px",right:"-20px"}),void $(".mainSlider").find(".bx-prev").css({width:"90px",left:"-20px"})):(resultWidth=(windowWidth-860)/2,$(".mainSlider").find(".bx-next").css({width:resultWidth+"px",right:-resultWidth+70+"px"}),void $(".mainSlider").find(".bx-prev").css({width:resultWidth+"px",left:-resultWidth+70+"px"}))}$(".bx-caption").eq(currentIndex).addClass("_active"),setWidth($(window)),$(window).resize(function(){setWidth($(this))})},onSlideBefore:function(){$(".bx-caption").each(function(){$(this).removeClass("_active")})},onSlideAfter:function($slideElement,oldIndex,newIndex){$(".bx-caption").eq(newIndex).addClass("_active")}})}),$(function(){var activeClass="_active";$(".menu__submenuListItem").on("click",function(event){var $that=$(this),$eventTarget=$(event.target);return $(".menu__submenuListItem").each(function(){$(this).is($that)||($(this).removeClass(activeClass),$(this).css("height",20))}),$eventTarget.is($(".menu__submenuListItemSublistItemLink"))?($eventTarget.prop("href")&&(window.location.href=$eventTarget.prop("href")),!1):void($(this).hasClass(activeClass)?($(this).removeClass(activeClass),$(this).css("height",20)):($(this).addClass(activeClass),$(this).css("height",$(this).find(".menu__submenuListItemSublist").height()+20)))})}),$(function(){function init(){var centerData=$objectMap.data("center");objectsMap=new ymaps.Map("objectsmap",{center:[centerData[0],centerData[1]],behaviors:["default","scrollZoom"],zoom:10});var markersData=$objectMap.data("markers");objectsMap.behaviors.disable("multiTouch"),objectsMap.controls.add("zoomControl",{left:5,top:90}).add("typeSelector").add("mapTools",{left:35,top:90}),objectsClusterer=new ymaps.Clusterer({gridSize:128}),$.each(markersData,function(index,value){if(value.coords.lat&&value.coords.lng){var geo_objects=new ymaps.GeoObject({geometry:{type:"Point",coordinates:[parseFloat(value.coords.lat),parseFloat(value.coords.lng)]},properties:{hasBalloon:!1,iconContent:'<a href="'+value.url+'" class="objectBaloon"><div class="objectBaloon__header">'+value.header+'</div><img src="'+value.img+'" alt="" class="objectBaloon__image"/></a>',clusterCaption:value.header}},{iconOffset:[-45,-92],iconImageSize:[0,0]});objectsClusterer.add(geo_objects),objectsMap.geoObjects.add(objectsClusterer)}})}var objectsMap,$objectMap=$("#objectsmap");if($objectMap.length){var objectsMap;ymaps.ready(init)}}),$(function(){$(".page__wrapper");$(".popup__closeButton").on("click",function(){$.fancybox.close()})}),$(function(){$(".services__listItemContentExpanderOpenerLink").length&&$(".services__listItemContentHeaderLink").on("click",function(){$(this).parents(".services__listItem").find(".services__listItemContentExpanderOpenerLink").trigger("click")}),$(".services__listItemContentExpanderOpenerLink").on("click",function(event){event.preventDefault();var $expander=$(this).closest(".services__listItemContentExpander"),$hiddenContent=$expander.find(".services__listItemContentExpanderFull"),openedClass="_opened",openedText=$(this).data("opened-text"),closedText=$(this).data("closed-text");$expander.hasClass(openedClass)?($hiddenContent.slideUp(200),$expander.removeClass(openedClass),$(this).text(closedText)):($hiddenContent.slideDown(200),$expander.addClass(openedClass),$(this).text(openedText))})}),$(function(){var $objectSlider=$(".objectSlider"),$objectSliderAuthor=$objectSlider.find(".objectSlider__author"),$page=$(".page");if($objectSlider.length){var objectSlider=$(".objectSlider__slider").bxSlider({mode:"fade",auto:!0,pause:1e4,autoHover:!0,adaptiveHeight:!0,infiniteLoop:!0,captions:!0,onSliderLoad:function(currentIndex){""===$objectSlider.find(".bx-caption").eq(currentIndex).find("span").text()?$objectSliderAuthor.addClass("_hidden"):($objectSliderAuthor.removeClass("_hidden"),$(".bx-caption").eq(currentIndex).addClass("_active"))},onSlideBefore:function(){$objectSlider.find(".bx-caption").each(function(){$(this).removeClass("_active")})},onSlideAfter:function($slideElement,oldIndex,newIndex){""===$objectSlider.find(".bx-caption").eq(newIndex).find("span").text()?$objectSliderAuthor.addClass("_hidden"):($objectSliderAuthor.removeClass("_hidden"),$objectSlider.find(".bx-caption").eq(newIndex).addClass("_active"))}});$objectSlider.find(".objectSlider__zoom").on("click",function(){$(".fullscreenSlider").addClass("_active");var $fullscreenSlider=$(".fullscreenSlider__wrapper");$fullscreenSlider.length&&($fullscreenSlider.on("jcarousel:createend",function(){$(this).jcarousel("scroll",objectSlider.getCurrentSlide(),!1)}).jcarousel({wrap:"circular"}),$(".fullscreenSlider__control._prev").jcarouselControl({target:"-=1"}),$(".fullscreenSlider__control._next").jcarouselControl({target:"+=1"}),$(".fullscreenSlider__footerPagination").on("jcarouselpagination:active","a",function(){var authorName=$(this).closest(".fullscreenSlider").find(".fullscreenSlider__listItem").eq($(this).index()).find("img").prop("title");""===authorName?($(".fullscreenSlider__footerAuthor").addClass("_hidden"),$(".fullscreenSlider__footerAuthorName").html("")):($(".fullscreenSlider__footerAuthor").removeClass("_hidden"),$(".fullscreenSlider__footerAuthorName").html(authorName)),$(this).addClass("active")}).on("jcarouselpagination:inactive","a",function(){$(this).removeClass("active")}).jcarouselPagination()),$(".fullscreenSlider__zoom").on("click",function(){$(".fullscreenSlider").removeClass("_active"),$page.removeClass("_static")})})}});